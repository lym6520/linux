var Alipw=function(){var d=navigator.userAgent.toLowerCase();var b=d.match(/msie ([\d.]+)/)?d.match(/msie ([\d.]+)/)[1]:undefined;var g=typeof(b)!="undefined";var l=b&&parseInt(b)==6;var j=b&&parseInt(b)==7;var i=b&&parseInt(b)==8;var h=b&&parseInt(b)==9;var m=/applewebkit/.test(d);var e=d.match(/opera\/([\d.]+)/);var f;var q;var n;var o;var p;var a=[];var k={initialize:function(){Alipw.utils=new Object();var s=Alipw.getFileInfo();Alipw.rootPath=s.rootPath;Alipw.classPath=s.classPath;Alipw.mode=s.mode;var r=Alipw.rootPath;if(typeof(jQuery)=="undefined"){document.write('<script type="text/javascript" src="'+r+"alipw/baselib/baselib-all.js?v="+Alipw.version+'"><\/script>')}else{document.write('<script type="text/javascript" src="'+r+"alipw/baselib/jquery/jquery.easing.js?v="+Alipw.version+'"><\/script>')}document.write('<link rel="stylesheet" type="text/css" href="'+r+"alipw/resources/css/style.css?v="+Alipw.version+'" />');Alipw.onDOMReady(function(){if(Alipw.theme){jQuery(document.body).addClass("alipw-theme-"+Alipw.theme)}})},version:"20121212145302",ieVersion:b,isIE:g,isIE6:l,isIE7:j,isIE8:i,isIE9:h,isWebKit:m,isOpera:e,theme:"default",useShims:false,apply:function(t,u,s){if(s){Alipw.apply(t,s)}if(t&&u&&typeof u=="object"){for(var r in u){t[r]=u[r]}}return t},override:function(r,t){if(t){var s=r.prototype;Alipw.apply(s,t);if(Alipw.ie()&&t.hasOwnProperty("toString")){s.toString=t.toString}}},extend:function(){var s=function(u){for(var t in u){this[t]=u[t]}};var r=Object.prototype.constructor;return function(y,v,x){if(typeof v=="object"){x=v;v=y;y=x.constructor!=r?x.constructor:function(){v.apply(this,arguments)}}var u=function(){},w,t=v.prototype;u.prototype=t;w=y.prototype=new u();w.constructor=y;y.superclass=t;if(t.constructor==r){t.constructor=v}y.override=function(z){Alipw.override(y,z)};w.superclass=w.supr=(function(){return t});w.override=s;Alipw.override(y,x);y.extend=function(z){return Alipw.extend(y,z)};return y}}(),getDoc:function(){if(!f){f=jQuery(window.document)}return f},getWin:function(){if(!q){q=jQuery(window)}return q},getBody:function(){if(!n){n=jQuery(window.document.body)}return n},getComp:function(r){return Alipw.ComponentManager.getComponent(r)},getModule:function(s){var r=Alipw.ComponentManager.getComponent(s);if(r instanceof Alipw.Module){return r}return null},addModuleScript:function(r){Alipw.Module.__moduleScriptFn=r;r.__Alipw_needToReload=true},adjustImgSize:function(t,x,y,s){if(typeof(s)=="undefined"){s=true}var w=new Image();w.src=t.src;var v=w.width;var u=w.height;if(!t._adjustSizeTryTime){t._adjustSizeTryTime=0}if((v==0||u==0)&&t._adjustSizeTryTime<100){t._adjustSizeTryTime++;setTimeout(function(){Alipw.adjustImgSize(t,x,y,s)},10);return}if(v<=x&&u<=y){t.style.width=v+"px";t.style.height=u+"px";if(s){t.style.paddingLeft=t.style.paddingRight=parseInt((x-v)/2)+"px";t.style.paddingTop=t.style.paddingBottom=parseInt((y-u)/2)+"px"}}else{var r=x;var z=(x*u)/v;if(z>y){z=parseInt(y);r=parseInt((y*v)/u)}t.style.width=r+"px";t.style.height=z+"px";if(s){t.style.paddingLeft=t.style.paddingRight=parseInt((x-r)/2)+"px";t.style.paddingTop=t.style.paddingBottom=parseInt((y-z)/2)+"px"}}},isSet:function(r){if(typeof(r)!="undefined"&&r!=null){return true}else{return false}},ie:function(){var r=navigator.userAgent.toLowerCase().match(/msie ([\d.]+)/);return r?r[1]:undefined},getPath:function(){if(!o){var u=document.getElementsByTagName("script");var s;for(var t=0,r=u.length;t<r;t++){s=u[t].src.toString().match(/(.*)alipw\/classes\//i);if(s){o=s[1];break}}}return o},getFileInfo:function(){if(!p){var u=document.getElementsByTagName("script");var s;for(var t=0,r=u.length;t<r;t++){s=u[t].src.toString().match(/(.*)alipw\/classes\/(.+)\.js/i);if(s){p={rootPath:s[1],classPath:s[1]+"alipw/classes/",mode:s[2].replace("alipw-","")}}}}return p},removeItemFromArray:function(u,s){for(var t=0,r=s.length;t<r;t++){if(s[t]==u){s.splice(t,1);t--;r=s.length}}},indexOfArray:function(u,s){for(var t=0,r=s.length;t<r;t++){if(s[t]===u){return t}}return -1},getDocWidth:function(){if(Alipw.ie()){if(document.compatMode=="BackCompat"){return document.body.scrollWidth}else{return document.documentElement.scrollWidth}}else{return jQuery(document).width()}},getDocHeight:function(){if(Alipw.ie()){if(document.compatMode=="BackCompat"){return document.body.scrollHeight}else{return document.documentElement.scrollHeight}}else{return jQuery(document).height()}},isInNode:function(s,r){var u=r.getElementsByTagName("*");for(var t=0;t<u.length;t++){if(u[t]==s){return true}}return false},isReady:function(){return Alipw.isDOMReady&&Alipw.ClassManager.getStatus()=="complete"},isDOMReady:false,onDOMReady:function(s){var v=false;var w=[];var x;var r=function(y){if(Alipw.isDOMReady){y.call(document)}else{w.push(function(){return y.call(this)})}return this};var t=function(){for(var y=0;y<w.length;y++){w[y].apply(document)}w=null};var u=function(y){if(Alipw.isDOMReady){return}Alipw.isDOMReady=true;t.call(window);if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",u,false)}else{if(document.attachEvent){document.detachEvent("onreadystatechange",u);if(window==window.top){clearInterval(x);x=null}}}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",u,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if((/loaded|complete/).test(document.readyState)){u()}});if(window==window.top){x=setInterval(function(){try{Alipw.isDOMReady||document.documentElement.doScroll("left")}catch(y){return}u()},5)}}}return r}(),onReady:function(r){Alipw.onDOMReady(function(){if(Alipw.ClassManager.getStatus()=="complete"){r()}else{a.push(r)}})},onLoad:function(r){jQuery(window).bind("load",function(){if(Alipw.isReady()){r()}else{Alipw.onReady(r)}})},importClass:function(){if(Alipw.mode=="all"){return}Alipw.ClassManager.loadClass.apply(Alipw.ClassManager,arguments)},each:function(s,v,u){if(!(v instanceof Function)){return}if(s instanceof Array){for(var t=0,r=s.length;t<r;t++){if(v.call(u,t,s[t])==false){break}}}else{if(s instanceof Object){for(var t in s){if(v.call(u,t,s[t])==false){break}}}}},clone:function(s,r){return jQuery.extend(r,{},s)},createFuncProxy:function(s,r){return function(){s.apply(r,arguments)}},loadScript:function(v){var t=v.url;var r=v.success;var u=document.getElementsByTagName("head")[0];var s=document.createElement("script");s.setAttribute("type","text/javascript");s.setAttribute("src",t);if(Alipw.isIE){s.onreadystatechange=function(){if(s.readyState=="complete"||s.readyState=="loaded"){if(r instanceof Function){r.call()}}}}else{s.onload=function(){if(r instanceof Function){r.call()}}}u.appendChild(s);return s},getWinProxy:function(){if(!Alipw.WinProxy.initialized){Alipw.WinProxy.initialize()}return Alipw.WinProxy},getObjectByName:function(s){var v=s.split(".");var u;for(var t=0,r=v.length;t<r;t++){if(!u&&t==0){u=window[v[t]]}else{if(u){u=u[v[t]]}else{break}}}return u},isNumeric:function(r){return !isNaN(parseFloat(r))&&isFinite(r)},isIntegral:function(r){return !isNaN(r)&&parseInt(r).toString()==r.toString()},classLoadedHandler:function(){for(var s=0,r=a.length;s<r;s++){a[s]()}a=[]},convertEl:function(s){var r;if(typeof(s)=="string"&&s.substr(0,1)!="#"){r=jQuery("#"+s)}else{r=jQuery(s);if(r.length>1){r=jQuery(r[0])}}return r}};return k}();Alipw.initialize();var A=Alipw;Alipw.Event=function(){var a=function(e,d,f,b){jQuery.extend(this,f);this.type=e.replace(/alipw\-/g,"");this.currentTarget=d;this.target=d;this.jQueryEvent=b};a.prototype={preventDefault:function(){if(this.jQueryEvent){this.jQueryEvent.preventDefault()}this.isDefaultPrevented=true},stopPropagation:function(){if(this.jQueryEvent){this.jQueryEvent.stopPropagation()}}};return a}();Alipw.EventManager=function(){var b=new Array();b.getFnProxy=function(g,e){for(var f=0,d=b.length;f<d;f++){if(b[f].fn==g&&b[f].object==e){return b[f].proxy}}return null};var a={addListener:function(e,i,h,g,j){var f;if(e instanceof Alipw.Component){f=e.el}else{if(e instanceof Alipw.Nonvisual){f=e.evtProxy}else{return}}if(!j){i="alipw-"+i}if(j&&e instanceof Alipw.Component){f.bind(i,g?jQuery.proxy(h,g):h)}else{var d=b.getFnProxy(h,e);if(!d){d=function(k,l){l.currentTarget=e;l.jQueryEvent=k;h.call(this,l,l)};b.push({proxy:d,fn:h,object:e})}f.bind(i,g?jQuery.proxy(d,g):d)}},removeListener:function(e,h,g,i){var f;if(e instanceof Alipw.Component){f=e.el}else{if(e instanceof Alipw.Nonvisual){f=e.evtProxy}else{return}}if(!i){h="alipw-"+h}if(i&&e instanceof Alipw.Component){f.unbind(h,g)}else{var d=b.getFnProxy(g,e);if(d){f.unbind(h,d)}}},fireEvent:function(e,g,j,d,i){var f;if(e instanceof Alipw.Component){f=e.el}else{if(e instanceof Alipw.Nonvisual){f=e.evtProxy}else{return}}if(!i){g="alipw-"+g}if(!Alipw.isSet(d)){d=true}if(i&&e instanceof Alipw.Component){if(d){f.trigger(g,j)}else{f.triggerHandler(g,j)}}else{var h=new Alipw.Event(g,e,j);if(d){f.trigger(g,h)}else{f.triggerHandler(g,h)}return h.isDefaultPrevented?false:true}},enableHashChangeEvent:function(){var d=this;this.hashChangeManager=new Object();this.hashChangeManager.lastHash=window.location.hash;this.hashChangeManager.timer=setInterval(function(){if(window.location.hash!==d.hashChangeManager.lastHash){var e=new Object();e.lashHash=d.hashChangeManager.lastHash.replace("#","");e.hash=window.location.hash.replace("#","");Alipw.getWinProxy().fireEvent("hashChange",e);d.hashChangeManager.lastHash=window.location.hash}},100)}};return a}();Alipw.ClassManager=function(){var d={"Alipw.ClassManager":"loaded","Alipw.Component":"loaded","Alipw.ComponentManager":"loaded","Alipw.BoxComponent":"loaded","Alipw.Shadow":"loaded","Alipw.Container":"loaded","Alipw.Nonvisual":"loaded","Alipw.Template":"loaded","Alipw.Module":"loaded","Alipw.Event":"loaded","Alipw.EventManager":"loaded","Alipw.WinProxy":"loaded"};var b={"Alipw.Container":["Alipw.BoxComponent"],"Alipw.Panel":["Alipw.Container","Alipw.Button"],"Alipw.Window":["Alipw.ResizeSupporter","Alipw.DragSupporter","Alipw.Panel","Alipw.ScreenMask","Alipw.WindowManager","Alipw.AnimationProxy"],"Alipw.Taskbar":["Alipw.Window","Alipw.TaskbarItem"],"Alipw.Button":["Alipw.BoxComponent"],"Alipw.Msg":["Alipw.Window","Alipw.Template"],"Alipw.ScreenMask":["Alipw.FixedWrapper"],"Alipw.FixedWrapper":["Alipw.Container"],"Alipw.ResizeSupporter":["Alipw.BorderContainer"],"Alipw.BorderContainer":["Alipw.Container"],"Alipw.ColorPicker":["Alipw.BoxComponent"],"Alipw.Gallery":["Alipw.DataProxy"],"Alipw.Slider":["Alipw.Component"],"Alipw.Scrollbar":["Alipw.Slider"],"Alipw.ValidatorGroup":["Alipw.Validator"],"Alipw.List":["Alipw.BorderContainer","Alipw.ListItem","Alipw.DataStore"],"Alipw.ComboBox":["Alipw.BorderContainer","Alipw.List"],"Alipw.DatePicker":["Alipw.BorderContainer","Alipw.utils.Date"],"Alipw.ToolTip":["Alipw.BorderContainer"]};var a=Alipw.classPath;var e=function(h){d[h]="loading";Alipw.loadScript({url:a+h+".js?v="+Alipw.version,success:function(){d[h]="loaded";f.classComplete(h);if(f.getStatus()=="complete"){f.complete()}else{g()}}})};var g=function(){for(var h in d){if(d[h]=="pending"){e(h);return}}};var f={loadingAdapter:null,getStatus:function(j){if(Alipw.isSet(j)){return d[j]}else{for(var h in d){if(d[h]!="loaded"){return"loading"}}return"complete"}},setStatus:function(i,h){d[i]=h},loadClass:function(){if(f.loadingAdapter){f.loadingAdapter.call(f,arguments,b);return}var h=f.getStatus();f.addClass.apply(f,arguments);if(h=="complete"){g()}},addClass:function(){var j=arguments;for(var k=0,h=j.length;k<h;k++){if(d[j[k]]){continue}var l=b[j[k]];if(l instanceof Array){f.addClass.apply(f,l)}d[j[k]]="pending"}},classComplete:function(h){Alipw.Config.applySettings(h)},complete:function(){Alipw.classLoadedHandler()}};return f}();Alipw.Config=function(){var b=new Object();var a={set:function(e,d){if(!b[e]){b[e]=new Object()}Alipw.apply(b[e],d);if(Alipw.mode=="all"){a.applySettings(e)}},get:function(d){return b[d]},applySettings:function(d){var e=Alipw.getObjectByName(d);if(e){if(e.prototype){Alipw.apply(e.prototype,b[d])}else{Alipw.apply(e,b[d])}}}};return a}();Alipw.Component=function(){var a=function(b){this.config=b||(new Object());this.commitProperties();this.initialize();this.createDom();this._runAutoRender()};a.prototype={autoRender:true,visibleRender:true,renderTo:null,defaultEl:"div",baseCls:"",subCls:"",cls:"",overCls:"",downCls:"",enabled:true,destroyed:false,visible:true,floating:false,floatingManagement:true,draggable:false,tooltip:"",position:"",inlineStyle:null,listeners:null,commitProperties:function(){Alipw.apply(this,this.config)},initialize:function(){Alipw.ComponentManager.register(this)},createDom:function(){this.el=$(document.createElement(this.defaultEl));if(this.listeners){for(var b in this.listeners){if(this.listeners[b] instanceof Function){this.addEventListener(b,this.listeners[b],this)}}}this.el.attr("id",this.id);if(this.baseCls){this.el.attr("class",this.baseCls)}if(this.subCls){this.el.addClass(this.subCls)}if(this.cls){this.el.addClass(this.cls)}if(this.zIndex){this.el.css("z-index",this.zIndex)}if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("position","absolute");this.x=this.getX()-jQuery(window).scrollLeft();this.y=this.getY()-jQuery(window).scrollTop();jQuery(window).bind("scroll",jQuery.proxy(this.scrollHandler_Component,this));this.addEventListener("destroy",function(d){jQuery(window).unbind("scroll",this.scrollHandler_Component)},this)}else{this.el.css("position","fixed")}}if(this.inlineStyle){this.el.css(this.inlineStyle)}},render:function(b){if(!b){if(this.renderTo){b=this.renderTo}else{b=document.body}}this.fireEvent("beforeRender",{},false);if(b instanceof Alipw.Container){b.appendChild(this,false)}else{b=Alipw.convertEl(b);b.append(this.el)}this.removed=false;this.fireEvent("afterRender",{},false);if(!this.rendered){this.renderComplete();this.rendered=true;this.creationCompleteFn_Component();this.fireEvent("creationComplete",{},false)}},renderComplete:function(b){this.addEventListener("afterLayout",this.afterLayoutHandler_Component,this);if(this.visibleRender&&this.el.is(":hidden")){var g=jQuery('<div style="position:absolute; left:-99999px; top:-99999px;"></div>');var f=this.el.next();var e=this.el.parent();jQuery(document.body).append(g);g.append(this.el);this.doLayout();if(f[0]){this.el.insertBefore(f)}else{e.append(this.el)}g.remove()}else{this.doLayout()}if(this.overCls){this.addEventListener("mouseover",this.mouseOverHandlerForOverCls_Component,this,true);this.addEventListener("mouseout",this.mouseOutHandlerForOverCls_Component,this,true)}if(this.downCls){var d=Alipw.createFuncProxy(this.mouseUpHandlerForDownCls_Component,this);this.addEventListener("mousedown",this.mouseDownHandlerForDownCls_Component,this,true);jQuery(document).bind("mouseup",d);this.addEventListener("destroy",function(h){jQuery(document).unbind("mouseup",d)},this)}},addEventListener:function(e,d,b,f){Alipw.EventManager.addListener(this,e,d,b,f)},removeEventListener:function(d,b,e){Alipw.EventManager.removeListener(this,d,b,e)},fireEvent:function(d,f,b,e){return Alipw.EventManager.fireEvent(this,d,f,b,e)},regEvents:function(e){for(var d=0,b=e.length;d<b;d++){Rainy.EventManager.register(e[d])}},update:function(){this.renderComplete(true)},show:function(){if(!this.rendered){this.render()}this.setVisible(true)},hide:function(){this.setVisible(false)},remove:function(b){if(this.destroyed){return}this.fireEvent("beforeRemove",{},false);if(b){this.el.remove()}else{this.el.detach()}this.removed=true;this.fireEvent("afterRemove",{},false)},destroy:function(){if(this.destroyed){return}this.fireEvent("destroy",{},false);this.remove(true);if(this.parentContainer){this.parentContainer=null}Alipw.ComponentManager.unregister(this);this.el=null;this.destroyed=true},setVisible:function(f,e,b){if(!Alipw.isSet(e)){e=f}if(f){this.el.show();this.el.css("visibility","visible")}else{this.el.hide();if(e){this.el.show();this.el.css({visibility:"hidden"})}else{this.el.hide();this.el.css({visibility:"hidden"})}}var d=this.visible;this.visible=f;if(d!=f&&!b){this.fireEvent("visibilityChange",{},false)}},getVisible:function(){if(this.el.is(":hidden")){return false}else{return true}},getZIndex:function(){return this.zIndex},getX:function(){var b=this.el.offset().left;if(this.position=="fixed"){return b-jQuery(window).scrollLeft()}else{return b}},getY:function(){var b=this.el.offset().top;if(this.position=="fixed"){return b-jQuery(window).scrollTop()}else{return b}},setPosition:function(b,g,f,e,d){if(!Alipw.isSet(e)){e=true}if(!Alipw.isSet(d)){d=true}if(Alipw.isSet(b)){if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("left",(b+jQuery(window).scrollLeft())+"px");this._ie6_fixedX=b}else{this.el.css("left",b+"px")}}else{if(d){this.el.offset({left:b})}else{this.el.css({left:b})}}}if(Alipw.isSet(g)){if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css("top",(g+jQuery(window).scrollTop())+"px");this._ie6_fixedY=g}else{this.el.css("top",g+"px")}}else{if(d){this.el.offset({top:g})}else{this.el.css("top",g+"px")}}}if(Alipw.isSet(f)){this.el.css("z-index",f)}if(e){this.fireEvent("move",{},false)}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},doLayout:function(d){var e=this;var b=function(){e.fireEvent("beforeLayout",{},false);e._doLayout();e.fireEvent("afterLayout",{},false)};if(this.__doLayoutBuffer){clearTimeout(this.__doLayoutBuffer)}if(d){this.__doLayoutBuffer=setTimeout(b,1)}else{b()}},_doLayout:function(){},_runAutoRender:function(){if(this.autoRender){this.render()}},afterLayoutHandler_Component:function(b){if(this.parentContainer){this.parentContainer.doLayout(true)}},scrollHandler_Component:function(){var b=jQuery(window);if(this.position=="fixed"){if(parseInt(Alipw.ie())==6){this.el.css({left:b.scrollLeft()+this._ie6_fixedX,top:b.scrollTop()+this._ie6_fixedY})}}},creationCompleteFn_Component:function(){if(this.draggable){var d=typeof(this.draggable)=="object"?this.draggable:{};this.dragSupporter=new Alipw.DragSupporter(jQuery.extend({target:this},d));this.addEventListener("destroy",function(){if(this.dragSupporter){this.dragSupporter.destroy();this.dragSupporter=null}},this);this.addEventListener("dragstart",this.dragStartHandler_Component,this);this.addEventListener("dragend",this.dragEndHandler_Component,this)}if(this.tooltip){var b;if(typeof(this.tooltip)=="object"){b=this.draggable}else{if(typeof(this.tooltip)=="string"){b={html:this.tooltip}}}this.tooltip=new Alipw.ToolTip(jQuery.extend({target:this},b))}},dragStartHandler_Component:function(){if(!this.dragSupporter.useProxy){if(this.shadow){this.shadow.disable()}}},dragEndHandler_Component:function(d,b){if(this.shadow){this.shadow.enable()}},mouseOverHandlerForOverCls_Component:function(b){if(this.destroyed){return}this.el.addClass(this.overCls)},mouseOutHandlerForOverCls_Component:function(b){if(this.destroyed){return}this.el.removeClass(this.overCls)},mouseDownHandlerForDownCls_Component:function(b){if(this.destroyed){return}this.el.addClass(this.downCls)},mouseUpHandlerForDownCls_Component:function(b){if(this.destroyed){return}this.el.removeClass(this.downCls)}};return a}();Alipw.ComponentManager=function(){var b=new Object();var a=new Array();var e=new Array();var d={zseed:8000,register:function(f){if(f.floating&&f.floatingManagement){a.push(f);f.zIndex=this.zseed+a.length*5}if(!f.id){e.push(f);f.id="Alipw-comp-"+e.length}b[f.id]=f},unregister:function(g){Alipw.removeItemFromArray(g,a);this.updateZIndex();for(var h=0,f=e.length;h<f;h++){if(e[h]==g){delete e[h]}}delete b[g.id]},getComponent:function(f){return b[f]},bringToFront:function(f){if(f.floating&&f.floatingManagement){Alipw.removeItemFromArray(f,a);a.push(f);this.updateZIndex()}},sendToBack:function(){},updateZIndex:function(){for(var g=0,f=a.length;g<f;g++){a[g].zIndex=this.zseed+(g+1)*5;if(a[g].rendered){a[g].setPosition(null,null,a[g].zIndex)}}}};return d}();Alipw.BoxComponent=Alipw.extend(Alipw.Component,{width:null,height:null,minWidth:1,minHeight:1,maxWidth:null,maxHeight:null,autoHeight:null,resizable:false,showShadow:false,shadowMode:"drop",constructor:function(a){Alipw.BoxComponent.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.BoxComponent.superclass.commitProperties.apply(this,arguments);if(!this.height&&!Alipw.isSet(this.autoHeight)){this.autoHeight=true}},initialize:function(){Alipw.BoxComponent.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.BoxComponent.superclass.createDom.apply(this,arguments)},render:function(a){Alipw.BoxComponent.superclass.render.apply(this,arguments)},renderComplete:function(b){Alipw.BoxComponent.superclass.renderComplete.apply(this,arguments);if(this.showShadow){if(!this.shadow){this.createShadow_BoxComponent()}this.shadow.show()}else{if(this.shadow){this.shadow.setVisible(false)}}if(this.resizable){var a=typeof(this.resizable)=="object"?this.resizable:{};this.resizeSupporter=new Alipw.ResizeSupporter(jQuery.extend({target:this,maxWidth:this.maxWidth,maxHeight:this.maxHeight,minWidth:this.minWidth,minHeight:this.minHeight},a));this.addEventListener("destroy",function(){if(this.resizeSupporter){this.resizeSupporter.destroy();this.resizeSupporter=null}},this)}},_doLayout:function(){Alipw.BoxComponent.superclass._doLayout.apply(this,arguments);if(this.width){this.el.width(this.width)}if(this.autoHeight){this.height=null;this.el.css("height","auto");var a=this.getHeight();if(this.maxHeight&&a>this.maxHeight){this.height=this.maxHeight;this.el.height(this.maxHeight)}if(this.minHeight&&a<this.maxHeight){this.height=this.minHeight;this.el.height(this.minHeight)}}else{if(this.height){this.el.height(this.height)}}},setWidth:function(a){this.width=a;this.doLayout();this.fireEvent("resize",{},false)},setHeight:function(a){this.height=a;this.autoHeight=false;this.doLayout();this.fireEvent("resize",{},false)},setSize:function(b,a){this.width=b;this.height=a;this.doLayout();this.fireEvent("resize",{},false)},getWidth:function(){return this.el.innerWidth()},getHeight:function(){return this.el.innerHeight()},createShadow_BoxComponent:function(a){if(this.shadow){return}if(this instanceof Alipw.Shadow){return}this.shadow=new Alipw.Shadow({target:this,position:this.position,mode:this.shadowMode});this.addEventListener("destroy",function(){if(this.shadow){this.shadow.destroy()}},this)}});Alipw.Shadow=Alipw.extend(Alipw.BoxComponent,{floating:true,mode:"drop",target:null,floatingManagement:false,baseCls:"alipw-shadow",constructor:function(a){Alipw.Shadow.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Shadow.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Shadow.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.Shadow.superclass.createDom.apply(this,arguments);if(Alipw.ie()&&parseInt(Alipw.ie())<7){this.el.attr("class","alipw-ie-shadow")}else{this.el.append(['<div class="xst">','<div class="xstl"></div>','<div class="xstc"></div>','<div class="xstr"></div>',"</div>",'<div class="xsc">','<div class="xsml"></div>','<div class="xsmc"></div>','<div class="xsmr"></div>',"</div>",'<div class="xsb">','<div class="xsbl"></div>','<div class="xsbc"></div>','<div class="xsbr"></div>',"</div>"].join(""))}if(this.target instanceof Alipw.BoxComponent){var a=Alipw.createFuncProxy(this.applyToElement,this);this.target.addEventListener("resize",a);this.target.addEventListener("move",a);this.target.addEventListener("visibilityChange",a);this.target.addEventListener("afterRemove",a);this.target.addEventListener("afterRender",a);this.addEventListener("destroy",function(){this.target.removeEventListener("resize",a);this.target.removeEventListener("move",a);this.target.removeEventListener("visibilityChange",a);this.target.removeEventListener("afterRemove",a);this.target.removeEventListener("afterRender",a)},this)}},render:function(a){Alipw.Shadow.superclass.render.apply(this,arguments);if(this.target){this.applyToElement()}},renderComplete:function(){Alipw.Shadow.superclass.renderComplete.apply(this,arguments)},_doLayout:function(){Alipw.Shadow.superclass._doLayout.apply(this,arguments);if(!(Alipw.ie()&&parseInt(Alipw.ie())<7)){if(this.width){if(this.width<12){this.width=12}this.el.find(".xstc").width(this.width-12);this.el.find(".xsmc").width(this.width-12);this.el.find(".xsbc").width(this.width-12)}if(this.height){if(this.height<12){this.height=12}this.el.find(".xsc").height(this.height-12)}}else{this.el.width(this.width-9);this.el.height(this.height-9)}},enable:function(){Alipw.Shadow.superclass.enable.apply(this,arguments);this.setVisible(true);this.applyToElement()},disable:function(){Alipw.Shadow.superclass.disable.apply(this,arguments);this.setVisible(false)},applyToElement:function(g){var i=this.target;if(i instanceof Alipw.BoxComponent&&i.floating){var b,a,d,f;if(this.mode=="drop"){b=a=-3;d=f=8}else{if(this.mode=="frame"){b=a=-5;d=f=10}else{if(this.mode=="sides"){b=-5;a=-3;d=10;f=8}}}this.setWidth(i.getWidth()+d);this.setHeight(i.getHeight()+f);this.setPosition(i.getX()+b,i.getY()+a,i.getZIndex()-1,true,false);if(this.enabled){var h;if(i.removed){h=false}else{h=i.visible}this.setVisible(h)}else{this.setVisible(false)}}}});Alipw.Container=Alipw.extend(Alipw.BoxComponent,{html:"",constructor:function(){Alipw.Container.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Container.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Container.superclass.initialize.apply(this,arguments);this.items=new Array()},createDom:function(){Alipw.Container.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Container.superclass.renderComplete.apply(this,arguments);if(this.html){this.appendChild(this.html)}},appendChild:function(d,b){if(!Alipw.isSet(b)){b=true}var a=this.getBody();if(d instanceof Alipw.Component){a.append(d.el);this.items.push(d);d.parentContainer=this}else{a.append(d)}if(b){this.doLayout()}},removeChild:function(d,b){if(!Alipw.isSet(b)){b=true}var a=this.getBody();if(d instanceof Alipw.Component){d.remove();d.parentContainer=null;Alipw.removeItemFromArray(d,this.items)}else{jQuery(d).detach()}if(b){this.doLayout()}},getBody:function(){return this.el},scrollX:function(b){var a=this.getBody();a.scrollTop(a.scrollLeft()+b)},scrollY:function(b){var a=this.getBody();a.scrollTop(a.scrollTop()+b)}});Alipw.Nonvisual=function(){var a=function(b){this.config=b||(new Object());this.commitProperties(b);if(this.autoInit){this.initialize()}};a.prototype={autoInit:true,initialized:false,enabled:true,listeners:null,commitProperties:function(){Alipw.apply(this,this.config)},initialize:function(){this.evtProxy=jQuery(new Object());this.initialized=true;if(this.listeners){for(var b in this.listeners){if(this.listeners[b] instanceof Function){this.addEventListener(b,this.listeners[b],this)}}}},addEventListener:function(e,d,b){Alipw.EventManager.addListener(this,e,d,b,false)},removeEventListener:function(d,b){Alipw.EventManager.removeListener(this,d,b,false)},fireEvent:function(b,d){return Alipw.EventManager.fireEvent(this,b,d,false,false)},regEvents:function(b){},update:function(){},destroy:function(){this.fireEvent("destroy")},enable:function(){this.enabled=true},disable:function(){this.enabled=false}};return a}();Alipw.WinProxy=function(){var a=new Alipw.Nonvisual({autoInit:false});return a}();Alipw.Template=Alipw.extend(Alipw.Nonvisual,{constructor:function(){Alipw.Template.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Template.superclass.commitProperties.apply(this,arguments);if(typeof(this.config)=="string"){this.html=this.config}else{if(this.config instanceof Array){this.html=this.config.join("")}}},initialize:function(){Alipw.Template.superclass.initialize.apply(this,arguments)},set:function(d){for(var a in d){var b=new RegExp("\\{\\$"+a+"\\}","g");this.html=this.html.replace(b,d[a])}return this},compile:function(){this.el=jQuery(this.html);return this.el}});Alipw.Module=Alipw.extend(Alipw.Component,{template:"",templateUrl:"",scripts:null,scriptUrls:null,loadingCls:"",commitProperties:function(){Alipw.Module.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Module.superclass.initialize.apply(this,arguments);if(!this.scripts){this.scripts=new Array()}if(!this.scriptUrls){this.scriptUrls=new Array()}this.context=new Object();this.__componentMgr=new Array()},createDom:function(){Alipw.Module.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Module.superclass.renderComplete.apply(this,arguments)},destroy:function(){for(var b=0,a=this.__componentMgr.length;b<a;b++){this.__componentMgr[b].destroy()}Alipw.Module.superclass.destroy.apply(this,arguments)},addScript:function(a){this.scripts.push(a)},load:function(b){this.fireEvent("beforeModuleLoad",{},false);if(this.loadingCls){this.el.addClass(this.loadingCls)}this.el.empty();for(var d=0,a=this.scripts.length;d<a;d++){if(this.scripts[d].__Alipw_needToReload){this.scripts.splice(d,1);a=this.scripts.length;d--}}if(this.templateUrl){this.loadTemplate_Module(b)}else{this.loadScripts_Module()}},create:function(d,b){var a;if(d){a=new d(b);this.__componentMgr.push(a)}return a},loadTemplate_Module:function(a){var f=this;if(!a){a=new Object()}var b=a.url||this.templateUrl;var e=a.method||"GET";var d=a.params;jQuery.ajax({url:b,type:e,data:d,success:function(g){f.template=g;f.loadScripts_Module()}})},loadScripts_Module:function(){if(this.destroyed){return}var e=this;var a=this.scriptUrls.length;var b=0;var d=function(){if(e.destroyed){return}var f=Alipw.loadScript({url:e.scriptUrls[b],success:function(){if(Alipw.Module.__moduleScriptFn instanceof Function){e.addScript(Alipw.Module.__moduleScriptFn);Alipw.Module.__moduleScriptFn=null}b++;if(b>=a){e.renderContent_Module()}else{d()}}});e.addEventListener("destroy",function(){jQuery(f).remove()})};if(a>0){d()}else{this.renderContent_Module()}},renderContent_Module:function(){if(this.destroyed){return}if(this.loadingCls){this.el.removeClass(this.loadingCls)}this.fireEvent("moduleLoaded",{},false);if(this.template){this.el.append(jQuery(this.template))}for(var b=0,a=this.scripts.length;b<a;b++){if(this.destroyed){return}this.scripts[b].call(this)}this.fireEvent("moduleRendered",{},false)}});Alipw.BorderContainer=Alipw.extend(Alipw.Container,{baseCls:"alipw-bordercontainer",constructor:function(){Alipw.BorderContainer.superclass.constructor.apply(this,arguments)},initialize:function(){Alipw.BorderContainer.superclass.initialize.apply(this,arguments)},commitProperties:function(){Alipw.BorderContainer.superclass.commitProperties.apply(this,arguments)},createDom:function(){Alipw.BorderContainer.superclass.createDom.apply(this,arguments);this.el.append(new Alipw.Template(['<div class="{$baseCls}-wrap">','<div class="{$baseCls}-header">','<div class="{$baseCls}-header-left">','<div class="{$baseCls}-header-right">','<div class="{$baseCls}-header-center">',"</div>","</div>","</div>","</div>",'<div class="{$baseCls}-body">','<div class="{$baseCls}-body-left">','<div class="{$baseCls}-body-right">','<div class="{$baseCls}-body-center">','<div class="{$baseCls}-body-content"></div>',"</div>","</div>","</div>","</div>",'<div class="{$baseCls}-footer">','<div class="{$baseCls}-footer-left">','<div class="{$baseCls}-footer-right">','<div class="{$baseCls}-footer-center">',"</div>","</div>","</div>","</div>","</div>"]).set({baseCls:this.baseCls}).compile())},renderComplete:function(){Alipw.BorderContainer.superclass.renderComplete.apply(this,arguments)},getWidthByBody:function(a){return a+(this.getWidth()-this.getBody().width())},getHeightByBody:function(a){return a+(this.getHeight()-this.getBody().height())},_doLayout:function(){Alipw.BorderContainer.superclass._doLayout.apply(this,arguments);var a=this.getBody();var d=this.el.find("."+this.baseCls+"-wrap");if(this.autoHeight){this.height=null;this.el.css("height","auto");a.css("height","auto");if(this.minHeight&&this.getHeight()<this.minHeight){this.height=this.minHeight}if(this.maxHeight&&this.getHeight()>this.maxHeight){this.height=this.maxHeight}}if(this.height){a.height(10);var b=d.outerHeight(true)-a.height();a.height(this.height-b)}if(this.width){a.css("width","auto");var e=d.outerWidth(true)-a.width();a.width(this.width-e)}},remove:function(){Alipw.BorderContainer.superclass.remove.apply(this,arguments)},getBody:function(){if(!this.__getBodyCache){this.__getBodyCache=this.el.find("."+this.baseCls+"-body-content");this.addEventListener("destroy",function(){this.__getBodyCache=null},this)}return this.__getBodyCache}});Alipw.AnimationProxy=Alipw.extend(Alipw.BoxComponent,{baseCls:"alipw-animationproxy",constructor:function(){Alipw.AnimationProxy.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.AnimationProxy.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.AnimationProxy.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.AnimationProxy.superclass.createDom.apply(this,arguments);this.setVisible(false)},renderComplete:function(){Alipw.AnimationProxy.superclass.renderComplete.apply(this,arguments)},_doLayout:function(){Alipw.AnimationProxy.superclass._doLayout.apply(this,arguments)},animate:function(a,f,d,i,e,b){var k=new Object();var l=new Object();var j=this.convertObjectToRect_AnimationProxy(a);k.width=j[2];k.height=j[3];k.left=j[0];k.top=j[1];k.opacity=d;var g=this.convertObjectToRect_AnimationProxy(f);l.width=g[2];l.height=g[3];l.left=g[0];l.top=g[1];l.opacity=i;this.el.stop();this.setVisible(true);this.el.css({width:k.width+"px",height:k.height+"px",left:k.left+"px",top:k.top+"px",opacity:k.opacity});var h=this;this.el.animate(l,e,null,function(){h.setVisible(false);if(b instanceof Function){b.call()}})},convertObjectToRect_AnimationProxy:function(b){if(b instanceof Alipw.Component){var d=b.el.offset();return[d.left,d.top,b.el.outerWidth(),b.el.outerHeight()]}else{if(b instanceof jQuery||b.nodeType==1||b.nodeType==9){var a=jQuery(b);var d=a.offset();return[d.left,d.top,a.outerWidth(),a.outerHeight()]}else{if(b instanceof Array){return b}}}}});Alipw.Gallery=Alipw.extend(Alipw.BoxComponent,{initIndex:0,width:640,height:480,thumbWidth:80,thumbHeight:60,picMaxWidth:null,picMaxHeight:null,dataProvider:[],dataProxy:null,maxDisplayPage:5,gap:10,thumbBarPosition:"top",prevText:"上一张",nextText:"下一张",showBigNavBtn:true,baseCls:"aliyun-com-gallery",constructor:function(){Alipw.Gallery.superclass.constructor.apply(this,arguments)},initialize:function(){Alipw.Gallery.superclass.initialize.apply(this,arguments);this._pageBegin=0;this._pageEnd=0;if(this.dataProxy&&this.dataProxy.total){this.totalLen=this.dataProxy.total;this._pageEnd=parseInt(this.dataProvider.length/this.dataProxy.limit)-1;this.dataProxy.addEventListener("complete",this.dataLoadHandler,this)}else{if(this.dataProvider){this.totalLen=this.dataProvider.length}}},createDom:function(){Alipw.Gallery.superclass.createDom.apply(this,arguments);var b=['<div class="'+this.baseCls+'-thumbs">','<a href="javascript:void(0)" hidefocus="true" class="'+this.baseCls+'-prevBtn"></a>','<a href="javascript:void(0)" hidefocus="true" class="'+this.baseCls+'-nextBtn"></a>','<div class="'+this.baseCls+'-scrollWrapper">',"<ul></ul>","</div>","</div>"].join("");var a=['<div class="'+this.baseCls+'-pic">','<div class="'+this.baseCls+'-pic-wrap">',"<img />",'<a href="javascript:void(0)" hidefocus="true" title="'+this.prevText+'" class="'+this.baseCls+'-prevBtn-big"></a>','<a href="javascript:void(0)" hidefocus="true" title="'+this.nextText+'" class="'+this.baseCls+'-nextBtn-big"></a>',"</div>","</div>"].join("");if(this.thumbBarPosition=="top"){this.el.append(['<div class="'+this.baseCls+'-wrap">',b,a,"</div>"].join(""))}else{if(this.thumbBarPosition=="bottom"){this.el.append(['<div class="'+this.baseCls+'-wrap">',a,b,"</div>"].join(""))}}},renderComplete:function(){Alipw.Gallery.superclass.renderComplete.apply(this,arguments);this.thumbCon=this.el.find("."+this.baseCls+"-thumbs");var d=this.thumbHeight+this.gap*2+4;this.thumbCon.height(d);var e=this.el.find("."+this.baseCls+"-prevBtn");var a=this.el.find("."+this.baseCls+"-nextBtn");e.bind("click",[this],this.prevBtnClickHandler);a.bind("click",[this],this.nextBtnClickHandler);e.height(this.thumbHeight+4-2);a.height(this.thumbHeight+4-2);var j=this.el.find("."+this.baseCls+"-scrollWrapper>ul");this.scrollWrapper=j.parent();this.thumbItems=new Array();var k=new Array();var g;for(var f=0,h=this.dataProvider.length;f<h;f++){k[f]=this.createThumbItem(f);k[f].setSrc(this.dataProvider[f][1]);this.thumbItems.push(k[f]);j.append(k[f])}var m=this.width-this.gap*2;if(this.picMaxWidth&&m>this.picMaxWidth){m=this.picMaxWidth}var l=this.height-d-this.gap*2;if(this.picMaxHeight&&l>this.picMaxHeight){l=this.picMaxHeight}this.bigPicCon=this.el.find("."+this.baseCls+"-pic");this.bigImg=this.bigPicCon.find("img");this.bigImg.css("opacity","0");this.bigImg.bind("load",[m,l],this.adjustPicSize);this.bigImg.bind("load","bigPic",jQuery.proxy(this.picCompleteHandler,this));this.bigPicCon.css({width:m+this.gap*2+"px",height:l+this.gap*2+"px"});this.bigPicConWrap=this.bigPicCon.find("."+this.baseCls+"-pic-wrap");this.bigPicConWrap.css({width:m+"px",height:l+"px",padding:this.gap+"px"});var b=this.el.find("."+this.baseCls+"-prevBtn-big");var n=this.el.find("."+this.baseCls+"-nextBtn-big");if(!this.showBigNavBtn){b.hide();n.hide()}b.bind("click",[this],this.prevBtnClickHandler);n.bind("click",[this],this.nextBtnClickHandler);if(this.dataProxy&&(!this.dataProvider||this.dataProvider.length<1)){this.dataProvider=[];this.loadItems(0)}else{this.gotoPic(this.initIndex)}},gotoPic:function(e){var g=this;if(this.currentIndex==e){}if(e=="next"){if(this.currentIndex<this.thumbItems.length-1){e=this.currentIndex+1}else{return}}else{if(e=="prev"){if(this.currentIndex>0){e=this.currentIndex-1}else{return}}}if(!this.dataProvider[e]){return}var f=this.currentIndex;this.currentIndex=e;if(this.thumbItems[f]){this.thumbItems[f].removeClass("on");this.thumbItems[f].stop();this.thumbItems[f].animate({opacity:0.4},300)}this.thumbItems[e].addClass("on");this.thumbItems[e].stop();this.thumbItems[e].animate({opacity:1},100);this.scrollWrapper.stop();var b=(this.thumbWidth+4+this.gap)*e-(this.thumbCon.width()-(this.thumbWidth+this.gap+4))/2;var d=(this.thumbWidth+4+this.gap)*this.totalLen-this.thumbCon.width();var a=false;if(d<0){b=d/2;a=true}else{if(b<0){b=0}else{if(b>d){b=d}}}if(!a){if((this.thumbWidth+4+this.gap)*this.thumbItems.length-b<this.thumbCon.width()){this.loadItems(this._pageEnd+1);this.clearThumbItems("header")}else{if(this._leftSpacer-b>0){this.loadItems(this._pageBegin-1);this.clearThumbItems("footer")}}}if(b>=0){this.scrollWrapper.animate({scrollLeft:b},600,"easeOutExpo")}else{this.scrollWrapper.attr("scrollLeft",0);this.scrollWrapper.find("ul").css("margin-left",(-b)+"px")}this.bigPicConWrap.removeClass("load-complete");if(this.isLoadingBigPic){this.bigImg.stop();this.bigImg.css("opacity","0");this.bigImg.css("filter","alpha(opacity=0)");this.bigImg.attr("src","");this.bigImg.attr("src",g.dataProvider[e][0])}else{this.isLoadingBigPic=true;this.bigImg.stop();this.bigImg.animate({opacity:0},300,function(){g.bigImg.attr("src","");g.bigImg.attr("src",g.dataProvider[e][0])})}},itemClickHandler:function(b){var d=b.data[0];var a=b.data[1];d.gotoPic(a)},adjustPicSize:function(a){Alipw.adjustImgSize(a.currentTarget,a.data[0],a.data[1])},picCompleteHandler:function(b){var a=$(b.currentTarget);if(b.data=="bigPic"){this.isLoadingBigPic=false}a.animate({opacity:1},300,function(){a.css("filter","")});a.parent().addClass("load-complete")},itemMouseOverHandler:function(b){var d=b.data[0];var a=b.data[1];if(a==d.currentIndex){return}jQuery(b.currentTarget).stop();jQuery(b.currentTarget).animate({opacity:1},100)},itemMouseOutHandler:function(b){var d=b.data[0];var a=b.data[1];if(a==d.currentIndex){return}jQuery(b.currentTarget).stop();jQuery(b.currentTarget).animate({opacity:0.4},300)},prevBtnClickHandler:function(a){var b=a.data[0];b.gotoPic("prev")},nextBtnClickHandler:function(a){var b=a.data[0];b.gotoPic("next")},dataLoadHandler:function(e){var count;var proxy=e.currentTarget;eval(e.content);if(count){proxy.total=count;this.totalLen=count}var len=this.dataProvider.length;this.dataProvider=this.dataProvider.concat(data);if(this.dataProvider.length>this.dataProxy.total){var num=this.dataProvider.length-this.dataProxy.total;var start=this.dataProvider.length-num;this.dataProvider.splice(start,num)}var from=len;var to=from+data.length;if(to>this.totalLen){to=this.totalLen}var ul=this.el.find("."+this.baseCls+"-scrollWrapper>ul");for(var i=from;i<to;i++){if(!this.thumbItems[i]){this.thumbItems[i]=this.createThumbItem(i);ul.append(this.thumbItems[i])}this.thumbItems[i].setSrc(this.dataProvider[i][1])}if(!Alipw.isSet(this.currentIndex)){this.gotoPic(this.initIndex)}},createThumbItem:function(b){var d=b;var e=jQuery('<li style="margin-right:'+this.gap+"px; width:"+this.thumbWidth+"px; height:"+this.thumbHeight+'px;"><div class="'+this.baseCls+'-highlightArrow"></div></li>');var a=jQuery('<img style="width:'+this.thumbWidth+"px; height:"+this.thumbHeight+'px" />');a.css("opacity","0");a.css("filter","alpha(opacity=0)");a.bind("load",[this.thumbWidth,this.thumbHeight],this.adjustPicSize);a.bind("load",jQuery.proxy(this.picCompleteHandler,this));e.bind("click",[this,d],this.itemClickHandler);e.bind("mouseover",[this,d],this.itemMouseOverHandler);e.bind("mouseout",[this,d],this.itemMouseOutHandler);e.append(a);e.setSrc=function(f){jQuery(this).find("img").attr("src",f)};return e},loadItems:function(d){var a=this.dataProxy.limit;var g=this.el.find("."+this.baseCls+"-scrollWrapper>ul");if(d<this._pageBegin){for(var f=d*a+a-1,j=d*a;f>=j;f--){if(this.thumbItems[f]&&this.thumbItems[f]._removed){g.prepend(this.thumbItems[f]);this.thumbItems[f]._removed=false}}this._leftSpacer-=this.dataProxy.limit*(this.thumbWidth+4+this.gap);g.css("margin-left",this._leftSpacer+"px");this._pageBegin-=1}else{var h=a;var b=this.totalLen-a*(this._pageEnd+1);if(b<a){h=b}var e;for(var f=0;f<h;f++){e=this.createThumbItem(a*d+f);this.thumbItems.push(e);g.append(e)}this._pageEnd+=1;if(this.dataProxy){this.dataProxy.load(d)}}},clearThumbItems:function(j){if(!this._leftSpacer){this._leftSpacer=0}var e=this.el.find("."+this.baseCls+"-scrollWrapper>ul");var a=this.dataProxy.limit;var f=this.dataProxy.total;if(this._pageEnd-this._pageBegin+1>this.maxDisplayPage){if(j=="header"){for(var d=this._pageBegin*a,h=this._pageBegin*a+a;d<h;d++){if(this.thumbItems[d]&&!this.thumbItems[d]._removed){this.thumbItems[d]._removed=true;this.thumbItems[d].parent()[0].removeChild(this.thumbItems[d][0])}}this._leftSpacer+=this.dataProxy.limit*(this.thumbWidth+4+this.gap);e.css("margin-left",this._leftSpacer+"px");this._pageBegin+=1}else{var h;if((this._pageEnd+1)*a>f){h=f}else{h=(this._pageEnd+1)*a}for(var d=this._pageEnd*a;d<h;d++){if(this.thumbItems[d]&&!this.thumbItems[d]._removed){this.thumbItems[d]._removed=true;this.thumbItems[d].remove()}}var b=this.thumbItems.length-this._pageEnd*a;var g=this._pageEnd*a;this.thumbItems.splice(g,b);this.dataProvider.splice(g,b);this._pageEnd-=1}}}});Alipw.Validator=Alipw.extend(Alipw.BoxComponent,{zIndex:100,conditions:null,correctMsg:"Correct!",msgPosition:"right",target:null,targetAttr:"value",triggerEvents:"change",baseCls:"alipw-validator",autoRender:false,success:false,isPending:false,pendingIndex:null,constructor:function(){Alipw.Validator.superclass.constructor.apply(this,arguments)},initialize:function(){Alipw.Validator.superclass.initialize.apply(this,arguments)},commitProperties:function(){Alipw.Validator.superclass.commitProperties.apply(this,arguments);this.targetEl=Alipw.convertEl(this.target);if(typeof(this.triggerEvents)=="string"){this.triggerEvents=[this.triggerEvents]}for(var b=0,a=this.triggerEvents.length;b<a;b++){this.targetEl.bind(this.triggerEvents[b],jQuery.proxy(this.validate,this))}},createDom:function(){Alipw.Validator.superclass.createDom.apply(this,arguments);var a=['<div class="'+this.baseCls+'-wrap">','<div class="'+this.baseCls+'-errorMsg"></div>','<div class="'+this.baseCls+'-correctMsg">'+this.correctMsg+"</div>",'<div class="'+this.baseCls+'-pendingMsg"></div>',"</div>"].join("");this.el.append(a)},renderComplete:function(){Alipw.Validator.superclass.renderComplete.apply(this,arguments);if(!this.renderTo){this.el.css("position","absolute");$(window).bind("resize",jQuery.proxy(this.setPosition_Validator,this))}},validate:function(){if(this.isPending){return this.success}if(!this.rendered){this.render()}this.setVisible(true);if(!this.renderTo){this.setPosition_Validator()}var f=this.el.find("."+this.baseCls+"-wrap");var h=true;var e=0,b=this.conditions.length;if(Alipw.isSet(this.pendingIndex)){e=this.pendingIndex+1}var g=function(j){this.isPending=false;f.removeClass(this.baseCls+"-wrap-correct");f.removeClass(this.baseCls+"-wrap-pending");f.addClass(this.baseCls+"-wrap-error");this.el.find("."+this.baseCls+"-errorMsg").html(this.conditions[j].errorMsg);h=false;this.pendingIndex=null;this.success=false;this.fireEvent("validateComplete",{},false)};for(e;e<b;e++){if(this.conditions[e].exp){if(!this.targetEl.attr(this.targetAttr).match(this.conditions[e].exp)){f.removeClass(this.baseCls+"-wrap-correct");f.removeClass(this.baseCls+"-wrap-pending");f.addClass(this.baseCls+"-wrap-error");this.el.find("."+this.baseCls+"-errorMsg").html(this.conditions[e].errorMsg);h=false;break}}else{if(this.conditions[e].url&&this.conditions[e].fn){this.isPending=true;this.pendingIndex=e;this.success="validating";f.removeClass(this.baseCls+"-wrap-correct");f.removeClass(this.baseCls+"-wrap-error");f.addClass(this.baseCls+"-wrap-pending");this.el.find("."+this.baseCls+"-pendingMsg").html(this.conditions[e].pendingMsg||"");var d=this.conditions[e].valueParamName||"value";var a=new Object();a[d]=this.targetEl.attr(this.targetAttr);jQuery.ajax({url:this.conditions[e].url,method:this.conditions[e].method||"GET",data:a,success:jQuery.proxy(function(i){this.isPending=false;if(this.conditions[e].fn.call(this.conditions[e],i)==false){g.call(this,e)}else{this.validate()}},this),error:jQuery.proxy(function(){g.call(this,e)},this)});return this.success}}}this.pendingIndex=null;if(h){f.removeClass(this.baseCls+"-wrap-pending");f.removeClass(this.baseCls+"-wrap-error");f.addClass(this.baseCls+"-wrap-correct");this.el.find("."+this.baseCls+"-correctMsg").html(this.correctMsg);this.success=true}else{this.success=false}this.fireEvent("validateComplete",{},false);return this.success},reset:function(){this.success=false;var a=this.el.find("."+this.baseCls+"-wrap");a.removeClass(this.baseCls+"-wrap-error");a.removeClass(this.baseCls+"-wrap-correct");this.setVisible(false)},setPosition_Validator:function(){var a,d;var b=this.targetEl.offset();if(this.msgPosition=="top"){a=b.left;d=b.top-this.el.outerHeight()}else{if(this.msgPosition=="right"){a=b.left+this.targetEl.outerWidth();d=b.top}else{if(this.msgPosition=="bottom"){a=b.left;d=b.top+this.targetEl.outerHeight()}else{if(this.msgPosition=="left"){a=b.left-this.el.outerWidth();d=b.top}}}}this.el.css({left:a+"px",top:d+"px"})}});Alipw.ValidatorGroup=Alipw.extend(Alipw.Nonvisual,{validators:[],success:false,commitProperties:function(){Alipw.ValidatorGroup.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.ValidatorGroup.superclass.initialize.apply(this,arguments);this.validatorItems=new Array();this.validatorStatus=new Object();Alipw.each(this.validators,function(d,a){var b=new Alipw.Validator(a);b.addEventListener("validateComplete",this.validateCompleteHandler_ValidatorGroup,this);this.validatorStatus[b.id]="";this.validatorItems.push(b)},this)},validate:function(){if(this.validators.length==0){return}var a=true;Alipw.each(this.validatorItems,function(d,b){this.validatorStatus[b.id]="standby";var e=b.validate();if(e==false){a=false}else{if(e=="validating"){if(a==true){a="validating"}}}},this);this.success=a;return this.success},reset:function(){Alipw.each(this.validatorItems,function(b,a){a.reset()},this)},validateCompleteHandler_ValidatorGroup:function(b){var a=b.currentTarget;if(this.validatorStatus[a.id]!="standby"){return}this.validatorStatus[a.id]="complete";var f=true;Alipw.each(this.validatorStatus,function(g,e){if(e=="standby"||e==""){f=false;return false}},this);if(!f){return}Alipw.each(this.validatorStatus,function(g,e){this.validatorStatus[g]=""},this);var d=true;Alipw.each(this.validatorItems,function(g,e){if(e.success==false){d=false}},this);this.success=d;this.fireEvent("validateComplete",{success:d},false)}});(function(){Alipw.FValidator=Alipw.extend(Alipw.Nonvisual,{commitProperties:function(h){Alipw.FValidator.superclass.commitProperties.apply(this,arguments);var i={items:[{item:null,tip:null,require:true,rule:null,ajax:null,msg:null}],rules:{},tipcls:{normal:"alipw-tip-normal",empty:"alipw-tip-empty",right:"alipw-tip-right",error:"alipw-tip-error",ajaxError:"alipw-tip-ajaxError",pending:"alipw-tip-pending"},msg:{normal:"请输入",empty:"此项不能空",right:"",error:"格式不正确",ajaxError:"服务器校验未通过",pending:"校验中..."},autoTrim:true,noRepeat:false};h=$.extend(true,i,h||{});b.call(this,h);this.ajaxCheckStatus={};this.result=true;this.count=0;this.ico={}},initialize:function(){Alipw.FValidator.superclass.initialize.apply(this,arguments);this.add(this.items)},add:function(j){var m=this,h=d(j)=="Array"?j:[j];for(var o=0,k=h.length;o<k;o++){var n=$(h[o].item);if(!n.length){continue}var j=this._configItem(h[o]);n.bind("focus blur",function(i){return function(l){l.type=="focus"?g(i,"normal"):m.check(i.item)}}(j));this.count++}return this},remove:function(n){var j=d(n)=="Array"?n:[n];for(var m=0,k=j.length;m<k;m++){$(j[m]).unbind("focus blur");var h=this._getItemVidentifier(j[m]);if(this.ico[h]&&this.ico[h].tip$){this.ico[h].tip$.remove();delete this.ico[h];this.count--}}return this},modify:function(i){delete i.result;var h=this._getItemVidentifier(i.item);i=$.extend(true,this.ico[h],i);this._configItem(i);i.noRepeat&&this.ico[h]&&(this.ico[h].$isChked=false);this.check(this.ico[h].item);return this},search:function(h){return $.extend(true,{},this.ico[this._getItemVidentifier(h)])},getResult:function(){return this.checkAll()},v2c:function(k,j){var i=this;this.checkAll();if(e(this.ajaxCheckStatus)){var h=setInterval(function(){if(e(i.ajaxCheckStatus)){return}clearInterval(h);j?k(i.result):(i.result&&k(i.result))},10)}else{j?k(i.result):(i.result&&k(i.result))}},check:function(o,n){var j=this._getItemVidentifier(o),i=this.ico[j],m=i.autoTrim?$.trim($(i.item).val()):$(i.item).val(),l=this,h;if(i.noRepeat){h=i.$oldValue===m&&i.$isChked?i.result:function(p){return f(i,p)}(this);i.$oldValue=m;i.$isChked=true}else{h=function(p){return f(i,p)}(this)}g(i,h,true);if(h=="pending"&&n){if(this.ajaxCheckStatus[j]){var k=setInterval(function(){if(l.ajaxCheckStatus[j]){return}clearInterval(k);n($.inArray(i.result,["right","normal"])<0?false:true)},10)}else{n($.inArray(i.result,["right","normal"])<0?false:true)}}h=$.inArray(h,["right","normal","pending"])<0?false:h=="pending"?"pending":true;return h},checkAll:function(j){this.result=true;for(var i in this.ico){var h=this.check(this.ico[i].item);if(j){switch(this.result){case true:this.result=h;break;case"pending":h===false&&(this.result=false);break}}else{this.result!==false&&(!h||h==="pending")&&(this.result=false)}}return this.result},_configItem:function(h){var h=$.extend(true,{},h);if($.inArray(d(h.rule),["String","Array"])>-1){if(d(h.rule)=="Array"){for(var j=0,i=h.rule.length;j<i;j++){d(h.rule[j])=="String"&&(h.rule[j]=this.rules[h.rule[j]])}}else{h.rule=this.rules[h.rule]}}h.require=h.require!==undefined?h.require:true;h.result=h.require?"empty":"normal";h.tipcls=$.extend(true,{},this.tipcls,h.tipcls||{});h.msg=$.extend(true,{},this.msg,h.msg||{});h.tip$=h.tip?$(h.tip):$('<span class="'+h.tipcls.normal+'"></span>').insertAfter(h.item);h.autoTrim=h.autoTrim===undefined?this.autoTrim:h.autoTrim;h.noRepeat=h.noRepeat===undefined?this.noRepeat:h.noRepeat;if(this.ico[this._getItemVidentifier(h.item)]){$.extend(true,this.ico[this._getItemVidentifier(h.item)]||{},h)}else{this.ico[this._getItemVidentifier(h.item)]=h}return h},_getItemVidentifier:function(i){var h=$(i),j=h.attr("_videntifier");if(!j){j=new Date().getTime()+"_"+this.count;h.attr("_videntifier",j)}return j}});function a(h){return document.createElement(h)}function b(h){for(var i in h){this[i]=h[i]}}function f(h,m){var r=h.autoTrim?$.trim($(h.item).val()):$(h.item).val(),p=h.rule,q=h.ajax,s;h.autoTrim&&$(h.item).val(r);if(r!==""){var o=d(p);switch(o){case"RegExp":s=p.test(r)?"right":"error";break;case"Function":s=p(r)?"right":"error";break;case"Array":var k=$.extend({},h);for(var n=0,j=p.length;n<j;n++){k.rule=p[n];k.ajax=null;if((s=f(k,m))=="error"){break}}break;default:s="right"}if(s=="right"&&q&&!m.ajaxCheckStatus[m._getItemVidentifier(h.item)]){s=h.result="pending";m.ajaxCheckStatus[m._getItemVidentifier(h.item)]=1;q(r,function(i,t){s=Boolean(i)?"right":"ajaxError";h.result=s;h.msg[s]=t||h.msg[s];if(s=="right"){m.result=true;for(var l in m.ico){if($.inArray(m.ico[l].result,["right","normal"])<0){m.result=false;break}}}else{m.result=false}g(h,s,true);delete m.ajaxCheckStatus[m._getItemVidentifier(h.item)]})}h.result=="pending"&&(s="pending");h.result=s}else{s=h.require?"empty":"normal";h.result=s}return s}function g(i,h,n){var j=i.tip$,l=j[0].$history_result;if(!i.require||l!=h){var k=i.tipcls[l],m=i.tipcls[h];j.removeClass(k).addClass(m).text(i.msg[h]||"");!i.require&&n&&h=="normal"?j.hide():j.show();j[0].$history_result=h}}function d(i){if(i&&i.constructor&&i.constructor.toString){var h=i.constructor.toString(),j=/^[\s\(]*function\s+(.+)\(/.exec(h);return j&&j[1]||"undefined"}return"undefined"}function e(j){var h=0;for(var i in j){h++}return h}Alipw.V=Alipw.FValidator})();Alipw.ToolTip=Alipw.extend(Alipw.BorderContainer,{html:"",target:null,showDelay:0.5,hideDelay:0.2,position:"auto",floating:true,showShadow:true,textMaxWidth:300,offsetX:0,offsetY:20,triggerEvents:["mouseover"],hideEvents:["mouseout"],baseCls:"alipw-tooltip",autoRender:false,constructor:function(){Alipw.ToolTip.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ToolTip.superclass.commitProperties.apply(this,arguments);this.targetEl=Alipw.convertEl(this.target)},initialize:function(){Alipw.ToolTip.superclass.initialize.apply(this,arguments);if(this.targetEl){for(var b=0,a=this.triggerEvents.length;b<a;b++){this.targetEl.bind(this.triggerEvents[b],jQuery.proxy(this.showHandler,this))}for(var b=0,a=this.hideEvents.length;b<a;b++){this.targetEl.bind(this.hideEvents[b],jQuery.proxy(this.hideHandler,this))}this.targetEl.bind("mousemove",jQuery.proxy(this.updateTipPos,this))}},createDom:function(){Alipw.ToolTip.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.ToolTip.superclass.renderComplete.apply(this,arguments);this.addEventListener("mouseover",this.showHandler,this,true);this.addEventListener("mouseout",this.hideHandler,this,true)},showTip:function(){this.show();if(this.__layoutChanged==true){this.refreshLayout_ToolTip();this.__layoutChanged=false}var a=this.lastPos[0];var f=this.lastPos[1];var b=[Alipw.getWin().width(),Alipw.getWin().height()];var e=b[0]+Alipw.getWin().scrollLeft()-5;var d=b[1]+Alipw.getWin().scrollTop()-5;if(a+this.el.outerWidth()>e){a=e-this.el.outerWidth()}if(f+this.el.outerHeight()>d){f=d-this.el.outerHeight()}if(a<0){a=0}if(f<0){f=0}this.setPosition(a,f)},setHtml:function(a){this.html=a;if(this.rendered){this.getBody().html(a)}if(this.visible&&this.rendered){this.refreshLayout_ToolTip()}else{this.__layoutChanged=true}},refreshLayout_ToolTip:function(){this.width=null;var a=this.getBody();a.css({width:"",height:""});this.el.css({width:"",height:""});this.doLayout();this.fireEvent("resize")},_doLayout:function(){if(this.textMaxWidth){var a=this.getBody();a.css("white-space","nowrap");if(this.textMaxWidth<a.width()){this.width=this.getWidthByBody(this.textMaxWidth)}a.css("white-space","")}Alipw.ToolTip.superclass._doLayout.apply(this,arguments)},showHandler:function(a){clearTimeout(this.hideDelayTimer);clearTimeout(this.showDelayTimer);if(this.visible&&this.rendered){return}this.showDelayTimer=setTimeout(jQuery.proxy(this.showTip,this),this.showDelay*1000)},hideHandler:function(a){clearTimeout(this.showDelayTimer);clearTimeout(this.hideDelayTimer);if(this.rendered){this.hideDelayTimer=setTimeout(jQuery.proxy(this.hide,this),this.hideDelay*1000)}},updateTipPos:function(a){this.lastPos=[a.pageX+this.offsetX,a.pageY+this.offsetY]}});Alipw.FixedWrapper=Alipw.extend(Alipw.Container,{floating:true,baseCls:"alipw-fixedWrapper",constructor:function(){Alipw.FixedWrapper.superclass.constructor.apply(this,arguments)},initialize:function(){Alipw.FixedWrapper.superclass.initialize.apply(this,arguments)},commitProperties:function(){Alipw.FixedWrapper.superclass.commitProperties.apply(this,arguments)},createDom:function(){Alipw.FixedWrapper.superclass.createDom.apply(this,arguments);this.el.append(['<div class="'+this.baseCls+'-innerWrap"></div>'].join(""))},renderComplete:function(){Alipw.FixedWrapper.superclass.renderComplete.apply(this,arguments);if(Alipw.useShims==true&&Alipw.isIE6){this.shim=$(['<iframe frameborder="0" class="'+this.baseCls+'-shim"></iframe>'].join(""));Alipw.getBody().append(this.shim)}var a=Alipw.createFuncProxy(this.resizeHandler_FixedWrapper,this);var b=Alipw.createFuncProxy(this.scrollHandler_FixedWrapper,this);jQuery(window).bind("resize",a);jQuery(window).bind("scroll",b);this.addEventListener("destroy",function(d){jQuery(window).unbind("resize",a);jQuery(window).unbind("scroll",b);if(this.shim){this.shim.remove();this.shim=null}},this);this.resizeHandler_FixedWrapper();this.scrollHandler_FixedWrapper()},remove:function(){Alipw.FixedWrapper.superclass.remove.apply(this,arguments)},getBody:function(){return this.el.find("."+this.baseCls+"-innerWrap")},resizeHandler_FixedWrapper:function(){if(Alipw.isIE6){var b=jQuery(window).width();var a=jQuery(window).height();this.setWidth(b);this.setHeight(a);if(this.shim){this.shim.attr({width:b,height:a});this.shim.css({width:b+"px",height:a+"px"})}}},scrollHandler_FixedWrapper:function(){if(Alipw.isIE6){var b=jQuery(document).scrollLeft();var a=jQuery(document).scrollTop();this.el.css({left:b+"px",top:a+"px"});if(this.shim){this.shim.css({left:b+"px",top:a+"px"})}}}});Alipw.ScreenMask=Alipw.extend(Alipw.FixedWrapper,{baseCls:"alipw-screenMask",opacity:0.5,constructor:function(){Alipw.ScreenMask.superclass.constructor.apply(this,arguments)},initialize:function(){Alipw.ScreenMask.superclass.initialize.apply(this,arguments)},commitProperties:function(){Alipw.ScreenMask.superclass.commitProperties.apply(this,arguments)},createDom:function(){Alipw.ScreenMask.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.ScreenMask.superclass.renderComplete.apply(this,arguments);this.setOpacity(this.opacity)},setOpacity:function(a){this.el.css("opacity",a)},remove:function(){Alipw.ScreenMask.superclass.remove.apply(this,arguments)}});Alipw.Button=Alipw.extend(Alipw.BoxComponent,{handler:null,scope:null,minHeight:22,minWidth:10,maxHeight:65,iconCls:"",label:"Button",baseCls:"alipw-button",defaultEl:"a",constructor:function(){Alipw.Button.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Button.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Button.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.Button.superclass.createDom.apply(this,arguments);this.el.attr("href","#");this.el.append(["<table>",'<tr class="'+this.baseCls+'-top">','<td class="'+this.baseCls+'-left"></td>','<td class="'+this.baseCls+'-center"></td>','<td class="'+this.baseCls+'-right"></td>',"</tr>",'<tr class="'+this.baseCls+'-middle">','<td class="'+this.baseCls+'-left"></td>','<td class="'+this.baseCls+'-center">','<span class="'+this.baseCls+'-icon"></span>','<span class="'+this.baseCls+'-text"></span>',"</td>",'<td class="'+this.baseCls+'-right"></td>',"</tr>",'<tr class="'+this.baseCls+'-bottom">','<td class="'+this.baseCls+'-left"></td>','<td class="'+this.baseCls+'-center"></td>','<td class="'+this.baseCls+'-right"></td>',"</tr>","</table>"].join(""));this.addEventListener("click",this.defaultClickHandler,this,true);if(this.handler){this.addEventListener("click",this.handler,this.scope||this,true)}},renderComplete:function(){Alipw.Button.superclass.renderComplete.apply(this,arguments);this.el.find("."+this.baseCls+"-text").html(this.label);this.setIconCls(this.iconCls);if(this.label){this.el.find("."+this.baseCls+"-text").show()}else{this.el.find("."+this.baseCls+"-text").hide()}},_doLayout:function(){Alipw.Button.superclass._doLayout.apply(this,arguments);if(this.width){this.el.find("."+this.baseCls+"-middle ."+this.baseCls+"-center").width(this.width-this.el.find("."+this.baseCls+"-left").width()-this.el.find("."+this.baseCls+"-right").width())}if(this.height){this.el.find("."+this.baseCls+"-middle ."+this.baseCls+"-center").height(this.height-this.el.find("."+this.baseCls+"-top").height()-this.el.find("."+this.baseCls+"-bottom").height())}},setIconCls:function(b){var a=this.el.find("."+this.baseCls+"-icon");if(this.iconCls){a.removeClass(this.iconCls)}this.iconCls=b;a.addClass(b);if(b){a.show()}else{a.hide()}},defaultClickHandler:function(a){a.preventDefault()}});Alipw.ComboBox=Alipw.extend(Alipw.BorderContainer,{baseCls:"alipw-combobox",overCls:"alipw-combobox-over",downCls:"alipw-combobox-down",expandedCls:"alipw-combobox-expanded",expandedUpCls:"alipw-combobox-expanded-up",expandedDownCls:"alipw-combobox-expanded-down",listCls:"",listAboveCls:"alipw-combobox-list-above",listUnderneathCls:"alipw-combobox-list-underneath",showListShadow:true,listMaxHeight:300,value:null,expanded:false,width:150,height:24,store:null,displayField:"text",valueField:"value",name:"",applyTo:null,fieldEl:null,constructor:function(){Alipw.ComboBox.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ComboBox.superclass.commitProperties.apply(this,arguments);if(this.applyTo){this.fieldEl=Alipw.convertEl(this.applyTo);if(this.fieldEl[0]){var a=new Array();this.displayField="text";this.valueField="value";this.fieldEl.find("option").each(function(b,d){var e=$(d).attr("value");if((Alipw.isIE6||Alipw.isIE7)&&d.attributes.value.specified==false){e=d.innerHTML}else{if(!Alipw.isSet(e)){e=d.innerHTML}}a.push({text:d.innerHTML,value:e})});this.store=new Alipw.DataStore({data:a});this.renderTo=this.fieldEl.parent();this.value=this.fieldEl.val();if(Alipw.isIE6){this.fieldEl.css({position:"absolute",top:"-99999999px",left:"-99999999px"})}else{this.fieldEl.hide()}}}},initialize:function(){Alipw.ComboBox.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.ComboBox.superclass.createDom.apply(this,arguments);this.appendChild(new Alipw.Template(['<div class="{$baseCls}-text"></div>']).set({baseCls:this.baseCls}).compile())},renderComplete:function(){Alipw.ComboBox.superclass.renderComplete.apply(this,arguments);this.addEventListener("click",this.clickHandler_ComboBox,this,true);var d=Alipw.createFuncProxy(this.documentClickHandler_ComboBox,this);var a=Alipw.createFuncProxy(this.windowResizeHandler_ComboBox,this);var b=Alipw.createFuncProxy(this.documentMouseWheelScrollHandler_ComboBox,this);Alipw.getDoc().bind("click",d);Alipw.getWin().bind("resize",a);if(Alipw.isIE||Alipw.isOpera||Alipw.isWebKit){Alipw.getDoc().bind("mousewheel",b)}else{Alipw.getDoc().bind("DOMMouseScroll",b)}this.addEventListener("destroy",function(){Alipw.getDoc().unbind("click",d);Alipw.getWin().unbind("resize",a);if(Alipw.isIE||Alipw.isOpera||Alipw.isWebKit){Alipw.getDoc().unbind("mousewheel",b)}else{Alipw.getDoc().unbind("DOMMouseScroll",b)}this.fieldEl=null},this);if(this.fieldEl&&this.fieldEl[0]){this.el.insertBefore(this.fieldEl)}else{this.fieldEl=jQuery('<input type="hidden" name="'+this.name+'" style="display:none" value="'+(Alipw.isSet(this.value)?this.value:"")+'" />');this.fieldEl.insertAfter(this.el)}this.setValue(this.value)},_doLayout:function(){Alipw.ComboBox.superclass._doLayout.apply(this,arguments)},expand:function(){if(this.expanded){return}this.__isExpanding=true;if(!this.list){this.list=new Alipw.List({floating:true,createFieldEl:false,showShadow:this.showListShadow,subCls:"alipw-combobox-list",cls:this.listCls,maxHeight:this.listMaxHeight,store:this.store,width:this.width,displayField:this.displayField,valueField:this.valueField,value:this.value});this.list.addEventListener("itemclick",this.listItemClickHandler_ComboBox,this);this.list.addEventListener("select",this.listSelectHandler_ComboBox,this);this.list.addEventListener("change",this.listChangeHandler_ComboBox,this);this.list.addEventListener("valueChange",this.listValueChangeHandler_ComboBox,this);this.addEventListener("destroy",function(){if(this.list){this.list.destroy()}},this)}this.list.setVisible(true);this.list.setWidth(this.getWidth());var g=this.list.selectedItems[0];if(g){this.list.getBody().scrollTop(this.list.selectedItems[0].el[0].offsetTop-parseInt((this.list.getHeight()-g.getHeight())/2))}var f=this.getX();var e=this.getY();var a=f;var h=e+this.getHeight();var b=jQuery(window).height();var d=this.list.getHeight();if(b-(h-jQuery(document).scrollTop())<d+10){this.list.el.addClass(this.listAboveCls);this.el.addClass(this.expandedUpCls);this.list.el.removeClass(this.listUnderneathCls);this.el.removeClass(this.expandedDownCls);h=e-d}else{this.list.el.removeClass(this.listAboveCls);this.el.removeClass(this.expandedUpCls);this.list.el.addClass(this.listUnderneathCls);this.el.addClass(this.expandedDownCls)}this.list.setPosition(Math.round(a),Math.round(h));Alipw.ComponentManager.bringToFront(this.list);this.expanded=true;this.el.addClass(this.expandedCls);this.__isExpanding=false},collapse:function(){if(!this.expanded){return}if(this.list){this.list.setVisible(false)}this.expanded=false;this.el.removeClass(this.expandedCls);this.el.removeClass(this.expandedUpCls);this.el.removeClass(this.expandedDownCls)},setText:function(a){this.el.find("."+this.baseCls+"-text").text(a)},setValue:function(b){var a=b!=this.value;this.applyValue_ComboBox(b);if(this.list){this.list.setValue(b)}else{if(a){this.fireEvent("valueChange",{},false);this.fieldEl.triggerHandler("alipw-valueChange")}}},setStore:function(a){this.store=a;this.updateStore()},updateStore:function(){if(!this.store){return}var b=this.store.getData();var a=b[0]?b[0][this.valueField]:"";if(this.fieldEl[0].nodeName=="SELECT"){this.fieldEl.empty();Alipw.each(b,function(d,e){this.fieldEl.append('<option value="'+e[this.valueField]+'">'+e[this.displayField]+"</option>")},this)}this.setValue(a);if(this.list){this.collapse();this.list.destroy();this.list=null}},applyValue_ComboBox:function(b){if(!Alipw.isSet(b)||!(this.store instanceof Alipw.DataStore)){return}this.value=null;this.setText("");this.fieldEl.val("");var a=this.store.getData();Alipw.each(a,function(d,e){if(b==e[this.valueField]){this.setText(e[this.displayField]);this.value=b;this.fieldEl.val(b);return false}},this)},clickHandler_ComboBox:function(a){if(this.expanded){this.collapse()}else{this.expand()}},documentClickHandler_ComboBox:function(a){if(Alipw.isInNode(a.target,this.el[0])||(this.list&&Alipw.isInNode(a.target,this.list.el[0]))){return}this.collapse()},windowResizeHandler_ComboBox:function(a){if(this.__isExpanding){return}this.collapse()},documentMouseWheelScrollHandler_ComboBox:function(b){if(this.list){if(Alipw.isInNode(b.target,this.list.el[0])){b.preventDefault();var a;if(Alipw.isIE||Alipw.isOpera||Alipw.isWebKit){a=-1*b.wheelDelta/40}else{a=b.detail}this.list.scrollY(a*10)}else{this.collapse()}}},listItemClickHandler_ComboBox:function(a){this.collapse()},listSelectHandler_ComboBox:function(a){this.fireEvent("select",{index:a.index,item:a.item},false)},listValueChangeHandler_ComboBox:function(b){var a=b.currentTarget;this.applyValue_ComboBox(a.value);this.fireEvent("valueChange",{},false);this.fieldEl.triggerHandler("alipw-valueChange")},listChangeHandler_ComboBox:function(a){this.fireEvent("change",{},false);this.fieldEl.triggerHandler("change")}});Alipw.Panel=Alipw.extend(Alipw.Container,{baseCls:"alipw-panel",showHeader:true,closable:false,closeAction:"remove",closeBtnConfig:{},minWidth:200,minHeight:150,width:200,height:150,title:"",buttons:"",buttonAlign:"center",buttonGap:6,constructor:function(){Alipw.Panel.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Panel.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Panel.superclass.initialize.apply(this,arguments);this.headerButtonItems=new Array();this.buttonItems=new Array()},createDom:function(){Alipw.Panel.superclass.createDom.apply(this,arguments);this.el.append(['<div class="'+this.baseCls+'-wrap">','<div class="'+this.baseCls+'-header">','<span class="'+this.baseCls+'-header-left">','<span class="'+this.baseCls+'-header-right">','<span class="'+this.baseCls+'-header-center">','<span class="'+this.baseCls+'-header-text">','<span class="'+this.baseCls+'-header-text-shadow"></span>','<span class="'+this.baseCls+'-header-text-fore"></span>',"</span>",'<div class="'+this.baseCls+'-header-buttons"></div>',"</span>","</span>","</span>","</div>",'<div class="'+this.baseCls+'-body-wrap">','<div class="'+this.baseCls+'-body-left">','<div class="'+this.baseCls+'-body-right">','<div class="'+this.baseCls+'-body">','<div class="'+this.baseCls+'-body-content">',"</div>",'<div class="'+this.baseCls+'-body-buttonbar">',"</div>","</div>","</div>","</div>","</div>",'<div class="'+this.baseCls+'-footer">','<span class="'+this.baseCls+'-footer-left">','<span class="'+this.baseCls+'-footer-right">','<span class="'+this.baseCls+'-footer-center"></span>',"</span>","</span>","</div>","</div>"].join(""));this.header=this.el.find("."+this.baseCls+"-header");this.body=this.getBody();this.footer=this.el.find("."+this.baseCls+"-footer");this.buttonBar=this.el.find("."+this.baseCls+"-body-buttonbar");this.bodyWrap=this.el.find("."+this.baseCls+"-body-wrap");this.addEventListener("destroy",function(){this.headerButtonItems=null;this.buttonItems=null},this)},renderComplete:function(){Alipw.Panel.superclass.renderComplete.apply(this,arguments);this.setTitle(this.title);this.renderHeaderBtns();if(this.buttons instanceof Array&&this.buttons.length>0){this.addButtons(this.buttons)}},_doLayout:function(){Alipw.Panel.superclass._doLayout.apply(this,arguments);var b=this.el.find("."+this.baseCls+"-wrap");if(this.showHeader){b.removeClass(this.baseCls+"-noheader")}else{b.addClass(this.baseCls+"-noheader")}if(this.buttonItems.length>0){this.buttonBar.css("text-align",this.buttonAlign);this.buttonBar.show()}else{this.buttonBar.hide()}var b=this.el.find("."+this.baseCls+"-wrap");var a=b.outerHeight();var d=b.outerWidth();if(this.height){this.body.height(this.height-(a-this.body.height()))}if(this.width){this.body.width("auto");this.body.width(this.width-(d-this.body.width()))}},setTitle:function(a){this.el.find("."+this.baseCls+"-header-text-shadow").html(a);this.el.find("."+this.baseCls+"-header-text-fore").html(a)},renderHeaderBtns:function(){if(this.closable){if(!this.closeBtn){this.closeBtn=new Alipw.Button(jQuery.extend({cls:"button-alipw-panel-header-red alipw-panel-btn-close",iconCls:"icon-alipw-panel-closeBtn",label:"",width:45,height:22,inlineStyle:{"margin-right":"-1px"},renderTo:this.el.find("."+this.baseCls+"-header-buttons"),handler:this.closeBtnHandler,scope:this},this.closeBtnConfig));this.headerButtonItems.push(this.closeBtn);this.closeBtn.addEventListener("mousedown",function(a){a.preventDefault();a.stopPropagation()},this,true)}}if(this.headerButtonItems.length<1){this.el.find("."+this.baseCls+"-header-buttons").hide()}else{this.el.find("."+this.baseCls+"-header-buttons").show()}},close:function(){this.fireEvent("beforeClose",{},false);if(this.closeAction=="remove"){this.destroy()}else{if(this.closeAction="hide"){this.setVisible(false)}}},getWidthByBody:function(a){return a+(this.getWidth()-this.body.width())},getHeightByBody:function(a){return a+(this.getHeight()-this.body.height())},addButtons:function(b){if(b instanceof Array){for(var e=0,a=b.length;e<a;e++){this.createButton(b[e])}this.doLayout()}else{if(typeof(b)=="object"){var d=this.createButton(b);this.doLayout();return d}}},getButton:function(a){},getBody:function(){return this.el.find("."+this.baseCls+"-body-content")},closeBtnHandler:function(a){a.stopPropagation();this.close()},createButton:function(a){var b=new Alipw.Button(jQuery.extend({renderTo:this.buttonBar,width:60,inlineStyle:{margin:"0 "+this.buttonGap/2+"px"}},a));this.buttonItems.push(b);b.ownerComp=this;return b},createButtons_Panel:function(){this.addButtons(this.buttons)}});Alipw.Window=Alipw.extend(Alipw.Panel,{subCls:"alipw-window",modal:false,modalOverlayOpacity:0.3,closable:true,maximizable:false,minimizable:false,initPosition:"",draggable:true,resizable:true,floating:true,position:"fixed",showShadow:true,autoCenter:false,animated:false,taskbar:null,constructor:function(){Alipw.Window.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Window.superclass.commitProperties.apply(this,arguments);if(this.draggable===true){this.draggable={useProxy:false}}},initialize:function(){Alipw.Window.superclass.initialize.apply(this,arguments);Alipw.WindowManager.register(this)},createDom:function(){Alipw.Window.superclass.createDom.apply(this,arguments);this.animationProxy=new Alipw.AnimationProxy();Alipw.getBody().append(this.animationProxy);this.addEventListener("destroy",function(a){this.animationProxy.remove();this.animationProxy=null},this);this.addEventListener("creationComplete",this.completeHandler_Window,this);this.addEventListener("dragend",this.dragEndHandler_Window,this);this.addEventListener("drag",this.dragHandler_Window,this)},renderComplete:function(){Alipw.Window.superclass.renderComplete.apply(this,arguments);if(this.draggable){var b=typeof(this.draggable)=="object"?this.draggable:{};this.draggable=jQuery.extend({dragEl:this.getDragEl_Window()},b)}if(this.modal){if(!this.modalOverlay){this.modalOverlay=new Alipw.ScreenMask({floatingManagement:false,opacity:this.modalOverlayOpacity});this.addEventListener("destroy",function(){if(this.modalOverlay){this.modalOverlay.destroy();this.modalOverlay=null}},this);this.modalOverlay.setPosition(null,null,this.zIndex-2)}this.modalOverlay.show()}else{if(this.modalOverlay){this.modalOverlay.setVisible(false)}}if(this.taskbar){if(typeof(this.taskbar)=="string"){this.taskbar=Alipw.getComp(this.taskbar)}if(this.taskbar instanceof Alipw.Taskbar){var a=this.taskbar.addItem(this);a.activate();this.addEventListener("beforeClose",function(){this.taskbar.removeItem(this)},this)}}this.addEventListener("visibilityChange",this.visibilityChangeHandler_Window,this);this.addEventListener("move",this.moveHandler_Window,this)},destroy:function(){Alipw.WindowManager.unregister(this);Alipw.Window.superclass.destroy.apply(this,arguments)},renderHeaderBtns:function(){if(this.minimizable&&this.taskbar){if(!this.minimizeBtn){this.minimizeBtn=new Alipw.Button({label:"",cls:"button-alipw-panel-header-grey alipw-panel-btn-min",width:30,height:22,inlineStyle:{"margin-right":"-1px"},iconCls:"icon-alipw-panel-minimizeBtn",renderTo:this.el.find("."+this.baseCls+"-header-buttons"),handler:this.minimizeHandler_Window,scope:this});if(this.closeBtn){this.el.find("."+this.baseCls+"-header-buttons").append(this.closeBtn.el)}}}if(this.maximizable){if(!this.maximizeBtn){this.maximizeBtn=new Alipw.Button({label:"",cls:"button-alipw-panel-header-grey alipw-panel-btn-max",width:30,height:22,inlineStyle:{"margin-right":"-1px"},iconCls:"icon-alipw-panel-maximizeBtn",renderTo:this.el.find("."+this.baseCls+"-header-buttons"),handler:this.maximizeRestoreHandler_Window,scope:this});if(this.closeBtn){this.el.find("."+this.baseCls+"-header-buttons").append(this.closeBtn.el)}this.header.bind("dblclick",jQuery.proxy(this.maximizeRestoreHandler_Window,this))}}Alipw.Window.superclass.renderHeaderBtns.apply(this,arguments)},center:function(){var e=jQuery(window);var b=this.getWidth();var d=this.getHeight();var a=parseInt((e.width()-b)/2);var f=parseInt((e.height()-d)/2);if(a<10){a=10}if(f<10){f=10}if(this.position=="fixed"){this.setPosition(a,f)}else{this.setPosition(a+e.scrollLeft(),f+e.scrollTop())}},minimize:function(a){if(a){this.animationProxy.animate(this,this.taskbar.getBarItemByWindow(this),0.3,0.1,300)}this.remove();this.taskbar.getBarItemByWindow(this).deactivate();this.minimized=true},maximize:function(){this._storage_for_restore=[this.getX(),this.getY(),this.width,this.height];this.maximized=true;this.maximizeBtn.el.removeClass("alipw-panel-btn-max");this.maximizeBtn.el.addClass("alipw-panel-btn-restore");this.maximizeBtn.setIconCls("icon-alipw-panel-restoreBtn");if(this.shadow){this.shadow.disable()}if(this.dragSupporter){this.dragSupporter.disable()}this.setPosition(0,0);this.setWidth(jQuery(window).width());this.setHeight(jQuery(window).height());if(this.resizeSupporter){this.resizeSupporter.disable()}},restore:function(a){if(this.minimized){this.minimized=false;this.render();if(a){this.setVisible(false,true);var b=this;this.animationProxy.animate(this.taskbar.getBarItemByWindow(this),this,0.3,0.1,300,function(){b.setVisible(true)})}else{this.setVisible(true)}}else{if(this.maximized){this.maximized=false;this.maximizeBtn.el.removeClass("alipw-panel-btn-restore");this.maximizeBtn.el.addClass("alipw-panel-btn-max");this.maximizeBtn.setIconCls("icon-alipw-panel-maximizeBtn");if(this.shadow){this.shadow.enable()}if(this.dragSupporter){this.dragSupporter.enable()}this.setPosition(this._storage_for_restore[0],this._storage_for_restore[1]);this.setWidth(this._storage_for_restore[2]);this.setHeight(this._storage_for_restore[3]);if(this.resizeSupporter){this.resizeSupporter.enable()}}}},maximizeRestoreHandler_Window:function(){if(this.maximized){this.restore(this.animated)}else{this.maximize(this.animated)}},minimizeHandler_Window:function(){this.minimize(this.animated)},completeHandler_Window:function(){if(!this.initPosition){this.center()}else{if(this.initPosition instanceof Array){this.setPosition(this.initPosition[0],this.initPosition[1])}}this.addEventListener("mousedown",this.mouseDownHandler_Window,this,true);var a=Alipw.createFuncProxy(this.resizeHandler_Window,this);jQuery(window).bind("resize",a);this.addEventListener("destroy",function(){jQuery(window).unbind("resize",a)},this)},visibilityChangeHandler_Window:function(a){if(this.modalOverlay){this.modalOverlay.setVisible(this.visible)}},moveHandler_Window:function(){if(this.modalOverlay){this.modalOverlay.setPosition(null,null,this.zIndex-2)}},resizeHandler_Window:function(){if(this.maximized){this.setWidth(jQuery(window).width());this.setHeight(jQuery(window).height())}if(!this.maximized&&this.autoCenter){var a=this;clearTimeout(this.centerTimer);this.centerTimer=setTimeout(function(){a.center()},10)}},mouseDownHandler_Window:function(b,a){Alipw.ComponentManager.bringToFront(this)},dragEndHandler_Window:function(b,a){this.setPosition(a.left,a.top)},dragHandler_Window:function(b,a){},getDragEl_Window:function(){if(this.showHeader&&this.header){return this.header}else{if(!this.showHeader&&this.body){return this.body}}}});Alipw.Taskbar=Alipw.extend(Alipw.BorderContainer,{baseCls:"alipw-taskbar",itemCls:"",commitProperties:function(){Alipw.Taskbar.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Taskbar.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.Taskbar.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Taskbar.superclass.renderComplete.apply(this,arguments);this.addEventListener("itemclick",function(a){a.stopPropagation();if(a.target.actived){a.target.deactivate();a.target.win.minimize(a.target.win.animated)}else{a.target.activate();a.target.win.restore(a.target.win.animated);Alipw.ComponentManager.bringToFront(a.target.win)}},this)},_doLayout:function(){Alipw.Taskbar.superclass._doLayout.apply(this,arguments)},getBarItemByWindow:function(b){var a;Alipw.each(this.items,function(d,e){if(e.win==b){a=e;return false}});return a},addItem:function(b){if(!(b instanceof Alipw.Window)||b.destroyed){return}var d=false;Alipw.each(this.items,function(e,f){if(f.win==b){d=true;return false}});if(d){return}var a=new Alipw.TaskbarItem({win:b,text:b.title,renderTo:this});return a},removeItem:function(a){if(!(a instanceof Alipw.Window)||a.destroyed){return}Alipw.each(this.items,function(b,d){if(d.win==a){this.removeChild(d);return false}},this)}});Alipw.TaskbarItem=Alipw.extend(Alipw.BorderContainer,{win:null,width:120,height:24,text:"",iconCls:"",baseCls:"alipw-taskbaritem",activedCls:"alipw-taskbaritem-actived",actived:false,commitProperties:function(){Alipw.TaskbarItem.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.TaskbarItem.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.TaskbarItem.superclass.createDom.apply(this,arguments);this.getBody().append(new Alipw.Template(['<span class="{$baseCls}-text"></span>']).set({baseCls:this.baseCls}).compile());this.addEventListener("click",function(){this.fireEvent("itemclick")},this,true)},renderComplete:function(){Alipw.TaskbarItem.superclass.renderComplete.apply(this,arguments);this.setText(this.text)},_doLayout:function(){Alipw.TaskbarItem.superclass._doLayout.apply(this,arguments)},setText:function(a){this.el.attr("title",this.text);this.el.find("."+this.baseCls+"-text").text(this.text)},activate:function(){this.actived=true;this.el.addClass(this.activedCls)},deactivate:function(){this.actived=false;this.el.removeClass(this.activedCls)}});Alipw.WindowManager=function(){var b=new Array();var a={zseed:8000,register:function(d){if(d instanceof Alipw.Window){b.push(d)}},unregister:function(d){Alipw.removeItemFromArray(d,b);if(b.length==0){}}};return a}();Alipw.Msg=function(){var b=function(s,d,r,j,t,g){var k={title:"Message",buttonAlign:"right"};var n=new Alipw.Template(['<div class="alipw-msg">','<div class="alipw-msg-text">',"{$msg}",'<div class="alipw-msg-icon {$iconCls}"></div>',"</div>","</div>"]).set({msg:d,iconCls:t.iconCls}).html;var q=jQuery.extend(k,j,{html:n,title:s,resizable:false,autoCenter:true,autoRender:false});var p=new Alipw.Window(q);p.setVisible(false,true);p.render();if(g instanceof Array){for(var l=0,o=g.length;l<o;l++){var m=p.addButtons(g[l]);m.addEventListener("click",function(i){if(typeof(r)=="function"){r(this._callbackToken)}p.close()},m,true)}}var f=p.el.find(".alipw-msg");f.css("white-space","nowrap");p.body.css("overflow","hidden");if(f.width()>t.textMaxWidth){f.width(t.textMaxWidth);f.css("white-space","")}else{if(f.width()<t.textMinWidth){f.width(t.textMinWidth);f.css("white-space","")}}var e=p.getWidthByBody(f.outerWidth());var h=p.getHeightByBody(f.outerHeight());p.setSize(e,h);p.center();Alipw.ComponentManager.bringToFront(p);p.setVisible(true);return p};var a={alert:function(l,d,k,e){if(typeof arguments[0]=="object"){var j=arguments[0],l=j.title||"提醒",d=j.msg,k=j.fn,e=j.config}if(typeof(e)!="object"){e=new Object()}var m={OKText:e.OKText||"OK",iconCls:e.iconCls||"alipw-icon-msg-warning",textMaxWidth:e.textMaxWidth||500,textMinWidth:e.textMinWidth||150};for(var g in m){delete e[g]}e=jQuery.extend({modal:true},e);var f=[{label:m.OKText,_callbackToken:"OK"}];var h=b(l,d,k,e,m,f);return h},prompt:function(g,f,e,d){},confirm:function(k,j,g,d){if(typeof(d)!="object"){d=new Object()}var l={yesText:d.yesText||"Yes",noText:d.noText||"No",iconCls:d.iconCls||"alipw-icon-msg-question",textMaxWidth:d.textMaxWidth||500,textMinWidth:d.textMinWidth||150};for(var e in l){delete d[e]}d=jQuery.extend({modal:true},d);var f=[{label:l.yesText,_callbackToken:"yes"},{label:l.noText,_callbackToken:"no"}];var h=b(k,j,g,d,l,f);return h},tip:function(g,d){if(typeof(d)!="object"){d=new Object()}var h={iconCls:d.iconCls||"alipw-icon-msg-success",textMaxWidth:d.textMaxWidth||500,textMinWidth:d.textMinWidth||150,timeout:function(){if(d.timeout===0){return 100000000000000}else{if(!d.timeout){return 2000}else{return d.timeout}}}()};for(var e in h){delete d[e]}d=jQuery.extend({showHeader:false,modal:false,draggable:false},d);var f=b("",g,null,d,h);setTimeout(function(){f.close()},h.timeout);return f}};return a}();Alipw.Slider=Alipw.extend(Alipw.Component,{width:200,type:"horizontal",valueFrom:"head",value:0,values:null,step:0,showFill:true,minValue:0,maxValue:100,baseCls:"alipw-slider",constructor:function(){Alipw.Slider.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Slider.superclass.commitProperties.apply(this,arguments);if(!this.values){this.values=new Array()}if(this.values.length==0&&this.step){var a=parseInt((this.maxValue-this.minValue)/this.step);this.values=new Array();for(var b=1;b<=a;b++){this.values.push(this.minValue+b*this.step)}}},initialize:function(){Alipw.Slider.superclass.initialize.apply(this,arguments);this.sliderDragManager=new Object()},createDom:function(){Alipw.Slider.superclass.createDom.apply(this,arguments);this.el.append(['<div class="'+this.baseCls+'-wrap">','<div class="'+this.baseCls+'-track">','<span class="'+this.baseCls+'-track-left">','<span class="'+this.baseCls+'-track-right">','<span class="'+this.baseCls+'-track-center">',"</span>","</span>","</span>",'<div class="'+this.baseCls+'-track-fill">','<span class="'+this.baseCls+'-track-fill-left">','<span class="'+this.baseCls+'-track-fill-right">','<span class="'+this.baseCls+'-track-fill-center">',"</span>","</span>","</span>","</div>","</div>",'<div class="'+this.baseCls+'-block">','<span class="'+this.baseCls+'-block-left">','<span class="'+this.baseCls+'-block-right">','<span class="'+this.baseCls+'-block-center">','<span class="'+this.baseCls+'-block-bg">',"</span>","</span>","</span>","</span>","</div>","</div>"].join(""));if(this.type=="vertical"){this.el.find("."+this.baseCls+"-wrap").addClass("alipw-slider-vertical")}this._block=this.el.find("."+this.baseCls+"-block");this._fill=this.el.find("."+this.baseCls+"-track-fill");this._track=this.el.find("."+this.baseCls+"-track");var a=this;this._track.setHeight=function(b){if(a.type!=="vertical"){return}var f=a.el.find("."+a.baseCls+"-track-center");var g=f.height();var e=a.el.find("."+a.baseCls+"-track").outerHeight();var h=e-g;f.height(b-h)};this._fill.setHeight=function(b){if(a.type!=="vertical"){return}var f=a.el.find("."+a.baseCls+"-track-fill-center");var g=f.height();var e=a.el.find("."+a.baseCls+"-track-fill").outerHeight();var h=e-g;f.height(b-h)};this._block.setHeight=function(b){if(a.type!=="vertical"){return}var f=a.el.find("."+a.baseCls+"-block-center");var g=f.height();var e=a.el.find("."+a.baseCls+"-block").outerHeight();var h=e-g;f.height(b-h)};this._block.centerBg=function(){var d=a.el.find("."+a.baseCls+"-block-center").height();var b=a.el.find("."+a.baseCls+"-block-bg");b.css("margin-top",parseInt((d-b.height())/2))}},renderComplete:function(){Alipw.Slider.superclass.renderComplete.apply(this,arguments);var a=this;if(!this.showFill){this._fill.hide()}if(this.valueFrom=="foot"){if(this.type=="vertical"){this._fill.css({top:"auto",bottom:"0"})}else{this._fill.css({left:"auto",right:"0"})}}this._block.hover(function(b){$(b.currentTarget).addClass(a.baseCls+"-block-hover")},function(b){$(b.currentTarget).removeClass(a.baseCls+"-block-hover")});this._track.bind("mousedown",jQuery.proxy(this.trackMouseDownHander_Slider,this));this._block.bind("mousedown",function(b){b.preventDefault();$(b.currentTarget).addClass(a.baseCls+"-block-down");a.getReady_Slider(b)});jQuery(document).bind("mousemove",jQuery.proxy(this.move_Slider,this));jQuery(document).bind("mouseup",jQuery.proxy(this.release_Slider,this));jQuery(document).bind("mouseup",function(b){a._block.removeClass(a.baseCls+"-block-down")});this.setValue(this.value)},_doLayout:function(){Alipw.Slider.superclass._doLayout.apply(this,arguments);if(this.width){if(this.type=="vertical"){this.el.height(this.width)}else{this.el.width(this.width)}}if(this.type=="vertical"){this._track.setHeight(this.width);this._block.centerBg()}},setValue:function(a){this.applyValue_Slider(a)},applyValue_Slider:function(b,a){if(b>this.maxValue){b=this.maxValue}else{if(b<this.minValue){b=this.minValue}}this.adjustBlockPosition_Slider(b);if(b!=this.value){this.value=b;this.fireEvent("valueChange",{value:b},false);if(a){this.fireEvent("change",{value:b},false)}}},adjustBlockPosition_Slider:function(a){var b=this.getCoordXByValue_Slider(a);if(this.type=="vertical"){this._block.offset({top:b});this._block.css("top",parseInt(this._block.css("top"))+"px");if(this.valueFrom=="foot"){this._fill.setHeight(this.el.offset().top+this.el.height()-b-parseInt(this._block.outerHeight()/2))}else{this._fill.setHeight(b-this.el.offset().top+parseInt(this._block.outerHeight()/2))}}else{this._block.offset({left:b});this._block.css("left",parseInt(this._block.css("left"))+"px");if(this.valueFrom=="foot"){this._fill.width(this.el.offset().left+this.el.width()-b-parseInt(this._block.outerWidth()/2))}else{this._fill.width(b-this.el.offset().left+parseInt(this._block.outerWidth()/2))}}},getReady_Slider:function(a){if(!this.enabled){return}a.preventDefault();this.sliderDragManager.ready=true;this.sliderDragManager._dx=this._block.offset().left-a.pageX;this.sliderDragManager._dy=this._block.offset().top-a.pageY},move_Slider:function(d){if(!this.enabled||!this.sliderDragManager.ready){return}d.preventDefault();var a=this.type=="vertical";if(!this.sliderDragManager.dragging){this.sliderDragManager.dragging=true}var b=this.getValueByCoord_Slider(a?(d.pageY+this.sliderDragManager._dy):(d.pageX+this.sliderDragManager._dx));this.applyValue_Slider(b,true)},release_Slider:function(a){if(!this.enabled){return}this.sliderDragManager.dragging=false;this.sliderDragManager.ready=false},getCoordXByValue_Slider:function(e){var a=this.type=="vertical";var d=a?this._block.outerHeight():this._block.outerWidth();var b=a?this.el.offset().top:this.el.offset().left;var g=a?this.el.height():this.el.width();var f;if(this.valueFrom=="head"){f=b+((e-this.minValue)/(this.maxValue-this.minValue))*(g-d)}else{if(this.valueFrom=="foot"){f=b+g-d-((e-this.minValue)/(this.maxValue-this.minValue))*(g-d)}}f=parseInt(f);return f},getValueByCoord_Slider:function(b){var m=this.type=="vertical";var f=m?this._block.outerHeight():this._block.outerWidth();var k=m?this.el.offset().top:this.el.offset().left;var a=m?this.el.height():this.el.width();if(b<k){b=k}else{if(b+f>k+a){b=k+a-f}}var l;if(this.valueFrom=="head"){l=this.minValue+(this.maxValue-this.minValue)*((b-k)/(a-f))}else{if(this.valueFrom=="foot"){l=this.minValue+(this.maxValue-this.minValue)*((k+a-f-b)/(a-f))}}var j=-1;var h;if(this.values.length>0){for(var e=0,g=this.values.length;e<g;e++){if(this.values[e]>this.minValue&&this.values[e]<this.maxValue){if(j==-1||Math.abs(l-this.values[e])<j){j=Math.abs(l-this.values[e]);h=this.values[e]}}}if(Math.abs(l-this.minValue)<j){j=Math.abs(l-this.minValue);h=this.minValue}if(Math.abs(l-this.maxValue)<j){j=Math.abs(l-this.maxValue);h=this.maxValue}l=h}return l},trackMouseDownHander_Slider:function(f){var a=this.type=="vertical";var b=[this._block.outerWidth(),this._block.outerHeight()];var d=this.getValueByCoord_Slider(a?(f.pageY-parseInt(b[1]/2)):(f.pageX-parseInt(b[0]/2)));this.applyValue_Slider(d,true)}});Alipw.Scrollbar=Alipw.extend(Alipw.Slider,{subCls:"alipw-scrollbar",target:null,mouseWheelDelta:120,width:0,showFill:false,tween:false,constructor:function(){Alipw.Scrollbar.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Scrollbar.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Scrollbar.superclass.initialize.apply(this,arguments);if(this.target){if(this.target instanceof Alipw.Container){}else{this._targetEl=Alipw.convertEl(this.target);this.renderTo=this._targetEl;if(this._targetEl[0]){this._targetEl.css("overflow","hidden");var d=this._targetEl.contents();for(var b=0,a=d.length;b<a;b++){if(d[b].className&&d[b].className.indexOf("alipw-scrollbar-container")!=-1){this._container=jQuery(d[b]);d.splice(b,1);a=d.length;b--;continue}if(d[b].className&&d[b].className.indexOf("alipw-scrollbar")!=-1){d.splice(b,1);a=d.length;b--;continue}}if(!this._container){this._container=jQuery('<div class="alipw-scrollbar-container"></div>');this._targetEl.append(this._container)}this._container.append(d)}}}},createDom:function(){Alipw.Scrollbar.superclass.createDom.apply(this,arguments)},renderComplete:function(){Alipw.Scrollbar.superclass.renderComplete.apply(this,arguments);if(this.type=="vertical"){this.el.css({right:"0",top:"0"})}else{this.el.css({bottom:"0",left:"0"})}this.addEventListener("valueChange",this.scrollHandler_Scrollbar,this);if(jQuery.browser.mozilla){this._targetEl.bind("DOMMouseScroll",jQuery.proxy(function(a){var b=-a.detail/3;this.mouseWheelHandler_Scrollbar(a,b)},this))}else{this._targetEl.bind("mousewheel",jQuery.proxy(function(a){var b;if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=a.detail/3}}this.mouseWheelHandler_Scrollbar(a,b)},this))}},disable:function(){Alipw.Scrollbar.superclass.disable.apply(this,arguments);this._container.css("height","auto");this.setVisible(false)},enable:function(){Alipw.Scrollbar.superclass.enable.apply(this,arguments);this.setVisible(true);this.doLayout()},_doLayout:function(){if(!this._targetEl||!this._targetEl[0]){return}this.refreshContents_Scrollbar();this.refreshScrollbar_Scrollbar();Alipw.Scrollbar.superclass._doLayout.apply(this,arguments)},mouseWheelHandler_Scrollbar:function(a,b){if(this.type!="vertical"||!this.visible){return}a.stopPropagation();a.preventDefault();this.setValue(this.value+(-b)*this.mouseWheelDelta)},refreshContents_Scrollbar:function(){var d=this._targetEl.contents();for(var b=0,a=d.length;b<a;b++){if(d[b].className&&d[b].className.indexOf("alipw-scrollbar")!=-1){d.splice(b,1);a=d.length;b--;continue}}if(d.length>0){this._container.append(d)}},refreshScrollbar_Scrollbar:function(){var e=parseInt(this._container.css("padding-bottom"));this._container.height(this._targetEl.height()-e);var g=parseInt(this._container.css("padding-right"));this._container.width(this._targetEl.width()-g);var d=this._container[0].scrollHeight;var f=this._container.height();var a=this._container[0].scrollWidth;var b=this._container.width();this.setVisible(true);if(this.type=="vertical"){if(d>f){this.width=this._targetEl.innerHeight();if(this._targetEl.css("position")=="static"){this._targetEl.css("position","relative")}this._block.setHeight((f/d)*this.width);this.maxValue=d-f;this._container.css("padding-right",this.el.outerWidth()+"px");this._container.width(this._targetEl.width()-this.el.outerWidth())}else{this._container.css("padding-right","0");this._container.width(this._targetEl.width());if(jQuery.browser.msie){this.setVisible(false,true)}else{this.setVisible(false)}}}else{if(a>b){this.width=this._targetEl.innerWidth();if(this._targetEl.css("position")=="static"){this._targetEl.css("position","relative")}this._block.width((b/a)*this.width);this.maxValue=a-b;this._container.css("padding-bottom",this.el.outerHeight()+"px");this._container.height(this._targetEl.height()-this.el.outerHeight())}else{this._container.css("padding-bottom","0");this._container.height(this._targetEl.height());if(jQuery.browser.msie){this.setVisible(false,true)}else{this.setVisible(false)}}}this.setValue(this.value)},scrollHandler_Scrollbar:function(a){if(this._targetEl&&this._targetEl[0]){if(this.type=="vertical"){if(this.tween){this._container.stop();this._container.animate({scrollTop:parseInt(a.value)},800,"easeOutExpo")}else{this._container[0].scrollTop=parseInt(a.value)}}else{if(this.tween){this._container.stop();this._container.animate({scrollLeft:parseInt(a.value)},800,"easeOutExpo")}else{this._container[0].scrollLeft=parseInt(a.value)}}}}});Alipw.ColorPicker=Alipw.extend(Alipw.BoxComponent,{applyTo:null,width:253,colors:[],baseCls:"alipw-colorpicker",autoRender:false,floating:true,showShadow:true,constructor:function(){Alipw.ColorPicker.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ColorPicker.superclass.commitProperties.apply(this,arguments);if(this.colors.length==0){this.colors=this.getDefaultColors_ColorPicker()}if(this.applyTo){this._applyToEl=Alipw.convertEl(this.applyTo)}},initialize:function(){Alipw.ColorPicker.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.ColorPicker.superclass.createDom.apply(this,arguments);var g=new Alipw.Template(['<div class="{$baseCls}-statusbar">','<div class="{$baseCls}-color-preview"></div>','<div class="{$baseCls}-color-info"></div>',"</div>"]).set({baseCls:this.baseCls}).compile();this._colorPreivewBox=g.find("."+this.baseCls+"-color-preview");this._colorInfoBox=g.find("."+this.baseCls+"-color-info");this.el.append(g);var f=jQuery('<div class="'+this.baseCls+'-wrap"></div>');this.el.append(f);var d;for(var e=0,b=this.colors.length;e<b;e++){d=new Alipw.Template(['<div class="{$baseCls}-cell" _color="{$color}" style="background:{$color}">','<div class="{$baseCls}-cell-highlight-border"></div>',"</div>"]);d.set({baseCls:this.baseCls,color:this.colors[e]});var a=d.compile();a.bind("click",jQuery.proxy(this.cellClickHandler_ColorPicker,this));a.bind("mouseover",jQuery.proxy(this.cellMouseOverHandler_ColorPicker,this));a.bind("mouseout",jQuery.proxy(this.cellMouseOutHandler_ColorPicker,this));f.append(a)}if(this._applyToEl){this._applyToEl.bind("focus",jQuery.proxy(this.applyToElement_ColorPicker,this));jQuery(document).bind("click",jQuery.proxy(this.documentClickHandler_ColorPicker,this));this.addEventListener("select",function(h){this._applyToEl.val(h.color);this.hide()},this)}},renderComplete:function(){Alipw.ColorPicker.superclass.renderComplete.apply(this,arguments)},getDefaultColors_ColorPicker:function(){var e=new Array();var h,f,d;var i=0;var a=new Array(["#000000","#000000","#000000"],["#000000","#333333","#000000"],["#000000","#666666","#000000"],["#000000","#999999","#000000"],["#000000","#CCCCCC","#000000"],["#000000","#FFFFFF","#000000"],["#000000","#FF0000","#000000"],["#000000","#00FF00","#000000"],["#000000","#0000FF","#000000"],["#000000","#FFFF00","#000000"],["#000000","#00FFFF","#000000"],["#000000","#FF00FF","#000000"]);for(h=0;h<16;h=h+3){for(f=0;f<7;f=f+3){for(d=0;d<16;d=d+3){if((e.length-i*3)%18==0){e.push(a[i][0]);e.push(a[i][1]);e.push(a[i][2]);i++}c="#"+f.toString(16)+f.toString(16)+d.toString(16)+d.toString(16)+h.toString(16)+h.toString(16);e.push(c)}}}for(h=0;h<16;h=h+3){for(f=9;f<16;f=f+3){for(d=0;d<16;d=d+3){if((e.length-i*3)%18==0){e.push(a[i][0]);e.push(a[i][1]);e.push(a[i][2]);i++}c="#"+f.toString(16)+f.toString(16)+d.toString(16)+d.toString(16)+h.toString(16)+h.toString(16);e.push(c)}}}return e},cellClickHandler_ColorPicker:function(b){var a=jQuery(b.currentTarget);this.fireEvent("select",{color:a.attr("_color").toUpperCase()},false)},cellMouseOverHandler_ColorPicker:function(d){var a=jQuery(d.currentTarget);a.addClass(this.baseCls+"-cell-hover");var b=a.attr("_color").toUpperCase();this._colorPreivewBox.css("background-color",b);this._colorInfoBox.html(b)},cellMouseOutHandler_ColorPicker:function(d){var a=jQuery(d.currentTarget);a.removeClass(this.baseCls+"-cell-hover");var b="";this._colorPreivewBox.css("background-color",b);this._colorInfoBox.html(b)},applyToElement_ColorPicker:function(j){var d=jQuery(j.currentTarget);this.show();Alipw.ComponentManager.bringToFront(this);var b=jQuery(window).height();var g=d.offset();var a=this.el.outerHeight();var f=[d.innerWidth(),d.innerHeight()];var i=g.left;var h;if(b-(g.top-jQuery(document).scrollTop())>=a){h=g.top+f[1]}else{h=g.top-a}this.setPosition(i,h)},documentClickHandler_ColorPicker:function(a){if(Alipw.isInNode(a.target,this._applyToEl[0])||a.target==this._applyToEl[0]||Alipw.isInNode(a.target,this.el[0])||a.target==this.el[0]){return}this.hide()}});Alipw.DatePicker=Alipw.extend(Alipw.BorderContainer,{applyTo:null,width:260,baseCls:"alipw-datepicker",autoRender:false,floating:true,showShadow:true,date:null,selectedDate:null,maxDate:null,minDate:null,yearText:"年",monthText:"月",weekText:["日","一","二","三","四","五","六"],format:"YYYY-MM-DD",constructor:function(){Alipw.DatePicker.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DatePicker.superclass.commitProperties.apply(this,arguments);if(!this.date){this.date=new Date()}if(this.applyTo){this._applyToEl=Alipw.convertEl(this.applyTo);var b=this._applyToEl.val();if(b){var a=Alipw.utils.Date.parse(b,this.format);if(a&&a!="Invalid Date"&&!isNaN(a)){this.date=a}}}},initialize:function(){Alipw.DatePicker.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.DatePicker.superclass.createDom.apply(this,arguments);this.getBody().append(new Alipw.Template(['<div class="{$baseCls}-body-wrap">','<div class="{$baseCls}-navbar">','<span class="{$baseCls}-navbar-info"></span>','<a href="#" class="{$baseCls}-navbar-btn-prevyear"></a>','<a href="#" class="{$baseCls}-navbar-btn-prevmonth"></a>','<a href="#" class="{$baseCls}-navbar-btn-nextyear"></a>','<a href="#" class="{$baseCls}-navbar-btn-nextmonth"></a>',"</div>",'<div class="{$baseCls}-calendar">',"<table>","<thead>","</thead>","<tbody>","</tbody>","</table>","</div>","</div>"]).set({baseCls:this.baseCls}).compile());if(this._applyToEl){this._applyToEl.bind("focus",jQuery.proxy(this.applyToElement_DatePicker,this));var a=Alipw.createFuncProxy(this.documentClickHandler_DatePicker,this);jQuery(document).bind("click",a);this.addEventListener("destroy",function(b){jQuery(document).unbind("click",a)},this);this.addEventListener("select",function(d){var b=d.currentTarget.selectedDate;this._applyToEl.val(Alipw.utils.Date.format(b,this.format));this.hide()},this)}},renderComplete:function(){this.setNavigationInfo(this.date.getFullYear()+" "+this.yearText+" "+(this.date.getMonth()+1)+" "+this.monthText);this.renderCalendarHeader();this.renderCells(this.date.getFullYear(),this.date.getMonth()+1);Alipw.DatePicker.superclass.renderComplete.apply(this,arguments);this.el.find("."+this.baseCls+"-navbar-btn-prevyear").click(jQuery.proxy(function(d){d.preventDefault();var b=[this.date.getFullYear(),this.date.getMonth()+1];var a=[b[0]-1,b[1]];this.setDate(new Date(a[0],a[1]-1));this.updateNavigationInfo()},this));this.el.find("."+this.baseCls+"-navbar-btn-prevmonth").click(jQuery.proxy(function(d){d.preventDefault();var b=[this.date.getFullYear(),this.date.getMonth()+1];var a=b[1]==1?[b[0]-1,12]:[b[0],b[1]-1];this.setDate(new Date(a[0],a[1]-1));this.updateNavigationInfo()},this));this.el.find("."+this.baseCls+"-navbar-btn-nextyear").click(jQuery.proxy(function(d){d.preventDefault();var b=[this.date.getFullYear(),this.date.getMonth()+1];var a=[b[0]+1,b[1]];this.setDate(new Date(a[0],a[1]-1));this.updateNavigationInfo()},this));this.el.find("."+this.baseCls+"-navbar-btn-nextmonth").click(jQuery.proxy(function(d){d.preventDefault();var b=[this.date.getFullYear(),this.date.getMonth()+1];var a=b[1]==12?[b[0]+1,1]:[b[0],b[1]+1];this.setDate(new Date(a[0],a[1]-1));this.updateNavigationInfo()},this));this.el.find("."+this.baseCls+"-calendar table").click(jQuery.proxy(function(b){b.preventDefault();if(b.target.nodeName=="TD"){var a=b.target.getAttribute("cellIndex");if(b.target.getAttribute("celldisabled")=="true"){return}this.selectedDate=new Date(this._calendarData[a].year,this._calendarData[a].month-1,this._calendarData[a].day);this.fireEvent("select",{},false)}},this));this.el.find("."+this.baseCls+"-calendar table").mouseover(jQuery.proxy(function(a){if(a.target.nodeName=="TD"&&jQuery(a.target).attr("celldisabled")!="true"){jQuery(a.target).addClass(this.baseCls+"-cell-over")}},this));this.el.find("."+this.baseCls+"-calendar table").mouseout(jQuery.proxy(function(a){if(a.target.nodeName=="TD"&&jQuery(a.target).attr("celldisabled")!="true"){jQuery(a.target).removeClass(this.baseCls+"-cell-over")}},this))},setNavigationInfo:function(a){this.el.find("."+this.baseCls+"-navbar-info").text(a)},updateNavigationInfo:function(){this.setNavigationInfo(this.date.getFullYear()+" "+this.yearText+" "+(this.date.getMonth()+1)+" "+this.monthText)},renderCalendarHeader:function(){var b="";b+="<tr>";for(var a=0;a<7;a++){b+="<th>"+this.weekText[a]+"</th>"}b+="</tr>";this.el.find("."+this.baseCls+"-calendar table thead").empty().append(b)},renderCells:function(g,j){var f="";f+="<tr>";var d=this.getDays_DatePicker(g,j);this._calendarData=d;var h;var b=new Date();todayYear=b.getFullYear();todayMonth=b.getMonth()+1;todayDay=b.getDate();for(var e=0,a=d.length;e<a;e++){if(e!=0&&e%7==0){f+="</tr><tr>"}if(d[e].isLastMonth){h=this.baseCls+"-lastmonth"}else{if(d[e].isNextMonth){h=this.baseCls+"-nextmonth"}else{if(d[e].year==todayYear&&d[e].month==todayMonth&&d[e].day==todayDay){h=this.baseCls+"-today"}else{h=""}}}if(d[e].disabled){h+=" "+this.baseCls+"-cell-disabled"}f+='<td class="'+h+'" cellIndex="'+e+'" celldisabled="'+d[e].disabled.toString()+'">'+d[e].day.toString()+"</td>"}f+="</tr>";this.el.find("."+this.baseCls+"-calendar table tbody").empty().append(f)},setDate:function(a){this.date=a;this.renderCells(this.date.getFullYear(),this.date.getMonth()+1)},getDays_DatePicker:function(k,j){var p=new Array();var n=function(q,s){var i=(q%100==0?res=(q%400==0?1:0):res=(q%4==0?1:0));var r=new Array(31,28+i,31,30,31,30,31,31,30,31,30,31);return r[s-1]};var g=(new Date(k,j-1)).getDay();var h=j==1?12:(j-1);var o=j==1?k-1:k;var l=g==0?7:g;var b;if(l>0){if(j==1){b=n(k-1,h)}else{b=n(k,h)}for(var d=b-l+1,f=b;d<=f;d++){p.push({year:o,month:h,day:d,isLastMonth:true,disabled:this.isDateDisabled_DatePicker(new Date(o+"/"+h+"/"+d))})}}for(var d=1,f=n(k,j);d<=f;d++){p.push({year:k,month:j,day:d,disabled:this.isDateDisabled_DatePicker(new Date(k+"/"+j+"/"+d))})}var m=42-p.length;var e=j==12?1:(j+1);var a=j==12?k+1:k;for(var d=1;d<=m;d++){p.push({year:a,month:e,day:d,isNextMonth:true,disabled:this.isDateDisabled_DatePicker(new Date(a+"/"+e+"/"+d))})}return p},isDateDisabled_DatePicker:function(a){if(this.minDate&&a&&a<this.minDate){return true}if(this.maxDate&&a&&a>this.maxDate){return true}return false},applyToElement_DatePicker:function(j){var d=jQuery(j.currentTarget);this.show();Alipw.ComponentManager.bringToFront(this);var b=jQuery(window).height();var g=d.offset();var a=this.el.outerHeight();var f=[d.innerWidth(),d.innerHeight()];var i=g.left;var h;if(b-(g.top-jQuery(document).scrollTop())>=a){h=g.top+f[1]}else{h=g.top-a}this.setPosition(i,h)},documentClickHandler_DatePicker:function(a){if(Alipw.isInNode(a.target,this._applyToEl[0])||a.target==this._applyToEl[0]||Alipw.isInNode(a.target,this.el[0])||a.target==this.el[0]){return}this.hide()}});Alipw.DataProxy=Alipw.extend(Alipw.Nonvisual,{total:1,limit:1,indexFrom:0,limitParamName:"limit",pageParamName:"page",constructor:function(){Alipw.DataProxy.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DataProxy.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.DataProxy.superclass.initialize.apply(this,arguments)},load:function(b){if(this.limit*b>=this.total){return}var a=this;var d=new Object();d[this.limitParamName]=this.limit;d[this.pageParamName]=b+this.indexFrom;jQuery.ajax({url:this.url,data:d,success:function(e){a.fireEvent("complete",{content:e,index:b})}})}});Alipw.DataStore=Alipw.extend(Alipw.Nonvisual,{data:null,constructor:function(){Alipw.DataStore.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DataStore.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.DataStore.superclass.initialize.apply(this,arguments)},getData:function(){return this.data}});Alipw.DragSupporter=Alipw.extend(Alipw.Nonvisual,{target:"",dragEl:"",useProxy:true,draggable:true,droppable:false,draggingCls:"alipw-component-dragging",enabled:true,constructor:function(){Alipw.DragSupporter.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DragSupporter.superclass.commitProperties.apply(this,arguments);if(this.target instanceof Alipw.Component){this.targetEl=this.target.el}else{this.targetEl=Alipw.convertEl(this.target)}},initialize:function(){Alipw.DragSupporter.superclass.initialize.apply(this,arguments);if(this.targetEl[0]){var a=this.dragEl?jQuery(this.dragEl):this.targetEl;a.bind("mousedown",jQuery.proxy(this.getReady,this));jQuery(document).bind("mousemove",jQuery.proxy(this.move,this));jQuery(document).bind("mouseup",jQuery.proxy(this.release,this))}},getReady:function(a){if(!this.enabled){return}a.preventDefault();this.ready=true;this._dx=this.targetEl.offset().left-a.pageX;this._dy=this.targetEl.offset().top-a.pageY},move:function(a){if(!this.enabled||!this.ready){return}a.preventDefault();if(!this.dragging){this.dragging=true;if(this.useProxy){if(!this.proxy){this.proxy=new Alipw.BorderContainer({cls:"alipw-dragproxy",floating:true,position:(this.target instanceof Alipw.Component)?this.target.position:""});this.addEventListener("destroy",function(){if(this.proxy){this.proxy.destroy();this.proxy=null}},this)}this.proxy.show();this.proxy.setWidth(this.targetEl.width());this.proxy.setHeight(this.targetEl.height());Alipw.ComponentManager.bringToFront(this.proxy)}else{if(this.draggingCls){this.targetEl.addClass(this.draggingCls)}}if(this.target instanceof Alipw.Component){this.originalPosition=[this.target.getX(),this.target.getY()];this.target.fireEvent("dragstart",{},false)}else{this.originalPosition=[this.targetEl.offset().left,this.targetEl.offset().top];this.targetEl.triggerHandler("alipw-dragstart")}}if(this.target instanceof Alipw.Component){if(this.target.position=="fixed"){this._currCoord=this.getHandledPosition_DragSupporter(a.clientX+this._dx,a.clientY+this._dy);(this.proxy||this.target).setPosition(this._currCoord[0],this._currCoord[1],null,false)}else{this._currCoord=this.getHandledPosition_DragSupporter(a.pageX+this._dx,a.pageY+this._dy);(this.proxy||this.target).el.offset({left:this._currCoord[0],top:this._currCoord[1]})}this.target.fireEvent("drag",{left:this._currCoord[0],top:this._currCoord[1]},false)}else{this._currCoord=this.getHandledPosition_DragSupporter(a.pageX+this._dx,a.pageY+this._dy);if(this.proxy){this.proxy.el.offset({left:this._currCoord[0],top:this._currCoord[1]})}else{this.targetEl.offset({left:this._currCoord[0],top:this._currCoord[1]})}this.targetEl.triggerHandler("alipw-drag",{left:this._currCoord[0],top:this._currCoord[1]})}},release:function(a){if(!this.enabled){return}if(this.dragging){this.dragging=false;if(this.target instanceof Alipw.Component){this.target.setPosition(this.originalPosition[0],this.originalPosition[1],null,false);this.target.fireEvent("dragend",{left:this._currCoord[0],top:this._currCoord[1]},false)}else{this.targetEl.offset({left:this.originalPosition[0],top:this.originalPosition[1]});this.targetEl.triggerHandler("alipw-dragend",{left:this._currCoord[0],top:this._currCoord[1]})}}if(this.draggingCls){this.targetEl.removeClass(this.draggingCls)}if(this.proxy){this.proxy.setVisible(false)}this.dragging=false;this.ready=false},getHandledPosition_DragSupporter:function(b,i){var k=jQuery(window);var d=k.width();var e=k.height();var g=Alipw.getDocWidth();var l=Alipw.getDocHeight();var j,f;j=this.targetEl.outerWidth();f=this.targetEl.outerHeight();if(this.target.position=="fixed"){if(b+j>d-10){b=d-j-10}if(b<10){b=10}if(i+f>e-10){i=e-f-10}if(i<10){i=10}}else{var a=d>g?d:g;var h=e>l?e:l;if(b+j>a-10){b=a-j-10}if(b<10){b=10}if(i+f>h-10){i=h-f-10}if(i<10){i=10}}return[b,i]}});Alipw.DragManager=function(){var a=new Array();var b={};return b}();Alipw.ResizeSupporter=Alipw.extend(Alipw.Nonvisual,{target:"",minWidth:16,minHeight:16,maxWidth:"",maxHeight:"",constructor:function(){Alipw.ResizeSupporter.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ResizeSupporter.superclass.commitProperties.apply(this,arguments);if(this.target instanceof Alipw.Component){this.targetEl=this.target.el}else{this.targetEl=Alipw.convertEl(this.target)}},initialize:function(){Alipw.ResizeSupporter.superclass.initialize.apply(this,arguments);if(this.targetEl.css("position")=="static"){this.targetEl.addClass("alipw-resizesupporter")}this.topLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-left"></div>');this.topCenterCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-center"></div>');this.topRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-top-right"></div>');this.middleLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-middle-left"></div>');this.middleRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-middle-right"></div>');this.bottomLeftCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-left"></div>');this.bottomCenterCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-center"></div>');this.bottomRightCorner=jQuery('<div class="alipw-resizesupporter-edge alipw-resizesupporter-edge-bottom-right"></div>');this.targetEl.append(this.topCenterCorner).append(this.middleLeftCorner).append(this.middleRightCorner).append(this.bottomCenterCorner).append(this.topLeftCorner).append(this.topRightCorner).append(this.bottomLeftCorner).append(this.bottomRightCorner);this.topLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.topCenterCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.topRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.middleLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.middleRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomLeftCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomCenterCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));this.bottomRightCorner.bind("mousedown",jQuery.proxy(this.getReady_ResizeSupporter,this));var d=Alipw.createFuncProxy(this.move_ResizeSupporter,this);var b=Alipw.createFuncProxy(this.release_ResizeSupporter,this);jQuery(document).bind("mousemove",d);jQuery(document).bind("mouseup",b);this.addEventListener("destroy",function(){jQuery(document).unbind("mousemove",d);jQuery(document).unbind("mouseup",b)},this);if(parseInt(Alipw.ie())<7){var a=function(){this.middleRightCorner.height(this.targetEl.height());this.middleLeftCorner.height(this.targetEl.height());this.topCenterCorner.width(this.targetEl.width());this.bottomCenterCorner.width(this.targetEl.width())};a.call(this);this.targetEl.bind("resize",jQuery.proxy(a,this));this.addEventListener("destroy",function(){this.targetEl.unbind("resize",a)},this)}},enable:function(){Alipw.ResizeSupporter.superclass.enable.apply(this,arguments);this.topLeftCorner.show();this.topCenterCorner.show();this.topRightCorner.show();this.middleLeftCorner.show();this.middleRightCorner.show();this.bottomLeftCorner.show();this.bottomCenterCorner.show();this.bottomRightCorner.show()},disable:function(){Alipw.ResizeSupporter.superclass.disable.apply(this,arguments);this.topLeftCorner.hide();this.topCenterCorner.hide();this.topRightCorner.hide();this.middleLeftCorner.hide();this.middleRightCorner.hide();this.bottomLeftCorner.hide();this.bottomCenterCorner.hide();this.bottomRightCorner.hide()},getReady_ResizeSupporter:function(g){if(!this.enabled){return}g.preventDefault();g.stopPropagation();if(g.currentTarget.setCapture){g.currentTarget.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}this.ready=true;if(g.currentTarget.className.indexOf("edge-top-left")!=-1){this.type="nw"}else{if(g.currentTarget.className.indexOf("edge-top-center")!=-1){this.type="n"}else{if(g.currentTarget.className.indexOf("edge-top-right")!=-1){this.type="ne"}else{if(g.currentTarget.className.indexOf("edge-middle-left")!=-1){this.type="w"}else{if(g.currentTarget.className.indexOf("edge-middle-right")!=-1){this.type="e"}else{if(g.currentTarget.className.indexOf("edge-bottom-left")!=-1){this.type="sw"}else{if(g.currentTarget.className.indexOf("edge-bottom-center")!=-1){this.type="s"}else{if(g.currentTarget.className.indexOf("edge-bottom-right")!=-1){this.type="se"}}}}}}}}var i,b,a,h;if(this.target instanceof Alipw.Component){i=this.target.getWidth();b=this.target.getHeight();targetX=this.target.getX();h=this.target.getY()}else{i=this.targetEl.width();b=this.targetEl.height();targetX=this.targetEl.offset().left;h=this.targetEl.offset().top}var k=[targetX,h];var j=[targetX+i,h];var d=[targetX,h+b];var f=[targetX+i,h+b];this.originalPoints=[k,j,d,f];if(this.target instanceof Alipw.Component&&this.target.position=="fixed"){this.anchor=[g.clientX,g.clientY]}else{this.anchor=[g.pageX,g.pageY]}},move_ResizeSupporter:function(h){if(!this.enabled||!this.ready){return}h.preventDefault();if(!this.resizing){this.resizing=true;if(!this.resizeProxy){this.resizeProxy=new Alipw.BorderContainer({cls:"alipw-resizeproxy",width:this.targetEl.width(),height:this.targetEl.height(),floating:true,position:(this.target instanceof Alipw.Component)?this.target.position:""});this.addEventListener("destroy",function(){if(this.resizeProxy){this.resizeProxy.destroy();this.resizeProxy=null}},this)}this.resizeProxy.el.css("cursor",this.type+"-resize");Alipw.ComponentManager.bringToFront(this.resizeProxy);this.resizeProxy.show();this.resizeProxy.setPosition(this.originalPoints[0][0],this.originalPoints[0][1])}var d=this.resizeProxy.position=="fixed"?[h.clientX,h.clientY]:[h.pageX,h.pageY];var f,k,j,b,a;if(this.type=="se"){f=d[0]-this.originalPoints[0][0]+(this.originalPoints[3][0]-this.anchor[0]);k=d[1]-this.originalPoints[0][1]+(this.originalPoints[3][1]-this.anchor[1])}else{if(this.type=="s"){k=d[1]-this.originalPoints[0][1]+(this.originalPoints[3][1]-this.anchor[1])}else{if(this.type=="e"){f=d[0]-this.originalPoints[0][0]+(this.originalPoints[3][0]-this.anchor[0])}else{if(this.type=="nw"){f=this.originalPoints[3][0]-d[0]+(this.anchor[0]-this.originalPoints[0][0]);k=this.originalPoints[3][1]-d[1]+(this.anchor[1]-this.originalPoints[0][1]);b=true;a=true;j=this.originalPoints[3]}else{if(this.type=="n"){k=this.originalPoints[3][1]-d[1]+(this.anchor[1]-this.originalPoints[0][1]);a=true;j=this.originalPoints[2]}else{if(this.type=="w"){f=this.originalPoints[3][0]-d[0]+(this.anchor[0]-this.originalPoints[0][0]);b=true;j=this.originalPoints[1]}else{if(this.type=="sw"){f=this.originalPoints[1][0]-d[0]+(this.anchor[0]-this.originalPoints[2][0]);k=d[1]-this.originalPoints[1][1]+(this.originalPoints[2][1]-this.anchor[1]);b=true;j=this.originalPoints[1]}else{if(this.type=="ne"){f=d[0]-this.originalPoints[2][0]+(this.originalPoints[1][0]-this.anchor[0]);k=this.originalPoints[2][1]-d[1]+(this.anchor[1]-this.originalPoints[1][1]);a=true;j=this.originalPoints[2]}}}}}}}}if(this.minWidth&&f<this.minWidth){f=this.minWidth}else{if(this.maxWidth&&f>this.maxWidth){f=this.maxWidth}}if(this.minHeight&&k<this.minHeight){k=this.minHeight}else{if(this.maxHeight&&k>this.maxHeight){k=this.maxHeight}}var i=b?this.resizeProxy.setPosition(j[0]-f):null;var g=a?this.resizeProxy.setPosition(null,j[1]-k):null;if(Alipw.isSet(f)){this.resizeProxy.setWidth(f)}if(Alipw.isSet(k)){this.resizeProxy.setHeight(k)}if(Alipw.isSet(i)||Alipw.isSet(g)){this.resizeProxy.setPosition(i,g)}},release_ResizeSupporter:function(a){if(!this.enabled||!this.ready){return}if(a.currentTarget.releaseCapture){a.currentTarget.releaseCapture()}else{if(window.releaseEvents){window.releaseEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}if(this.resizing){this.resizing=false;if(this.target instanceof Alipw.Component){this.target.setWidth(this.resizeProxy.getWidth());this.target.setHeight(this.resizeProxy.getHeight());if(this.target.el.css("position")=="fixed"||this.target.el.css("position")=="absolute"){this.target.setPosition(this.resizeProxy.getX(),this.resizeProxy.getY())}}else{this.targetEl.width(this.resizeProxy.getWidth()-(this.targetEl.outerWidth()-this.targetEl.width()));this.targetEl.height(this.resizeProxy.getHeight()-(this.targetEl.outerHeight()-this.targetEl.height()));if(this.targetEl.css("position")=="fixed"||this.targetEl.css("position")=="absolute"){this.targetEl.offset({x:this.resizeProxy.getX(),y:this.resizeProxy.getY()})}}}if(this.resizeProxy){this.resizeProxy.setVisible(false)}this.ready=false},getHandledPosition_ResizeSupporter:function(b,i){var k=jQuery(window);var d=k.width();var e=k.height();var g=Alipw.getDocWidth();var l=Alipw.getDocHeight();var j,f;j=this.targetEl.outerWidth();f=this.targetEl.outerHeight();if(this.target.position=="fixed"){if(b<10){b=10}else{if(b+j>d-10){b=d-j-10}}if(i<10){i=10}else{if(i+f>e-10){i=e-f-10}}}else{var a=d>g?d:g;var h=e>l?e:l;if(b<10){b=10}else{if(b+j>a-10){b=a-j-10}}if(i<10){i=10}else{if(i+f>h-10){i=h-f-10}}}return[b,i]}});Alipw.DataGrid=Alipw.extend(Alipw.BoxComponent,{applyTo:null,baseCls:"alipw-datagrid",showHeader:true,showFooter:false,altGrid:true,noneText:"很抱歉, 暂时没有相关数据!",gridConfig:[],gridData:[],cacheData:[],constructor:function(){Alipw.DataGrid.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.DataGrid.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.DataGrid.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.DataGrid.superclass.createDom.apply(this,arguments);var a=this;a.table=jQuery('<table class="'+this.baseCls+'-table"></table>');if(jQuery.isArray(a.gridConfig)&&a.gridConfig.length>0){a.ths=[];a.tds=[];jQuery.each(a.gridConfig,function(e,b){if(jQuery.isPlainObject(b)){var d=b.name,f=b.field;a.ths.push('<th class="'+a.baseCls+"-field-"+f+'">'+d+"</th>")}});a.htr="<tr>"+a.ths.join("")+"</tr>"}a.createThead();a.createTfoot();a.createTbody();a.el.append(a.table)},createThead:function(){var a=this;if(a.showHeader){a.thead=jQuery('<thead class="'+a.baseCls+'-thead"></thead>').append(a.htr);a.table.append(a.thead)}},createTfoot:function(){var a=this;if(a.showFooter){a.tfoot=jQuery('<tfoot class="'+a.baseCls+'-tfoot"></tfoot>').append(a.htr);a.table.append(a.tfoot)}},createTbody:function(){var a=this;a.tbody=jQuery('<tbody class="'+a.baseCls+'-tbody"></tbody>');a.table.append(a.tbody)},update:function(d){var a=this;a.gridData=d;a.tbody.empty();if(jQuery.isArray(d)&&d.length>0){a.tds=[];jQuery.each(d,function(f,e){a.item=$("<tr></tr>");if(a.altGrid&&f%2>0){a.item.addClass("alipw-datagrid-alt")}jQuery.each(a.gridConfig,function(k,g){var i=g.name,n=g.field,m=e[n];var j=(g.showValue)?g.showValue:"{$value}";var h=new Alipw.Template(['<td id="cell_{$row}_{$column}" class="{$baseCls}-value-{$field}">',j,"</td>"]);h.set({baseCls:a.baseCls,row:f,column:k,name:i,field:n,value:m});var l=h.compile();if(jQuery.isPlainObject(g.style)){l.css(g.style)}if(jQuery.isFunction(g.handlers)){l.empty();values=a.gridData[f];g.handlers(l,values)}a.item.append(l)});a.tbody.append(a.item)})}else{var b=new Alipw.Template(['<tr><td id="cell_none" class="{$baseCls}-value-none" colspan="{$colspan}">{$noneText}</td></tr>']);b.set({baseCls:a.baseCls,colspan:a.gridConfig.length,noneText:a.noneText});a.tbody.append(b.compile())}},renderComplete:function(){Alipw.DataGrid.superclass.renderComplete.apply(this,arguments);var a=this;a.update(a.gridData)}});Alipw.List=Alipw.extend(Alipw.BorderContainer,{baseCls:"alipw-list",selectedCls:"alipw-listitem-selected",scroll:true,store:null,selectable:true,multipleSelection:false,displayField:"text",valueField:"value",value:null,width:200,maxHeight:null,createFieldEl:true,applyTo:null,commitProperties:function(){Alipw.List.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.List.superclass.initialize.apply(this,arguments);this.listItems=new Array();this.selectedItems=new Array()},createDom:function(){Alipw.List.superclass.createDom.apply(this,arguments);this.renderListItem()},renderComplete:function(){Alipw.List.superclass.renderComplete.apply(this,arguments);if(this.scroll){this.getBody().css("overflow-y","auto")}},_doLayout:function(){Alipw.List.superclass._doLayout.apply(this,arguments);if(Alipw.isIE6||Alipw.isIE7){if(this.getBody()[0].style.height=="auto"){this.getBody().css("overflow-y","hidden")}else{if(this.scroll){this.getBody().css("overflow-y","auto")}}}},renderListItem:function(){if(!this.store instanceof Alipw.DataStore){return}var a=this.store.getData();Alipw.each(a,function(b,e){var d=new Alipw.ListItem({text:a[b][this.displayField],value:a[b][this.valueField],data:a[b],selectedCls:this.selectedCls,index:b,renderTo:this});if(this.value&&this.value==a[b][this.valueField]){if(this.multipleSelection||(!this.multipleSelection&&this.selectedItems.length==0)){d.select();this.selectedItems.push(d)}}d.addEventListener("itemclick",this.itemClickHandler_List,this);d.addEventListener("select",this.selectHandler_List,this);this.listItems.push(d)},this)},setValue:function(d){if(Alipw.isSet(d)&&this.listItems.length>0){var a=this.multipleSelection;var b=a?d.split(","):null;var e=false;Alipw.each(this.listItems,function(f,g){if(!a){if(g.value==d&&!e){e=true;g.select()}else{g.unselect();Alipw.removeItemFromArray(g,this.selectedItems)}}else{if(Alipw.indexOfArray(g.value,b)!=-1){g.select()}}},this);if(!a){if(!e){this.value=""}}else{}}},setStore:function(a){if(a instanceof Alipw.DataStore){this.store=a;this.updateListItems()}},updateListItems:function(){Alipw.each(this.listItems,function(a,b){b.destroy()});this.listItems.splice(0,999999999);this.selectedItems.splice(0,99999999);this.renderListItem()},applyValue_List:function(d,b){var a=this.value;this.value=d;if(a!=d){this.fireEvent("valueChange",{},false);if(b){this.fireEvent("change",{},false)}}},itemClickHandler_List:function(d){var b=d.currentTarget;var a=this.value;if(this.selectable){b.select(true)}this.fireEvent("itemclick",{index:b.index,item:b},false)},selectHandler_List:function(b){var a=b.currentTarget;if(!this.multipleSelection){if(Alipw.indexOfArray(a,this.selectedItems)!=-1){return}Alipw.each(this.selectedItems,function(d,e){e.unselect();Alipw.removeItemFromArray(e,this.selectedItems)},this)}else{if(Alipw.indexOfArray(a,this.selectedItems)!=-1){a.unselect();Alipw.removeItemFromArray(a,this.selectedItems);return}}this.selectedItems.push(a);if(!this.multipleSelection){this.applyValue_List(a.value,b.isUserOperation)}else{}this.fireEvent("select",{index:a.index,item:a},false)}});Alipw.ListItem=Alipw.extend(Alipw.BoxComponent,{baseCls:"alipw-listitem",overCls:"alipw-listitem-over",downCls:"alipw-listitem-down",selectedCls:"alipw-listitem-selected",index:null,selected:false,autoHeight:false,visibleRender:false,height:14,text:"",data:null,constructor:function(){Alipw.ListItem.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.ListItem.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.ListItem.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.ListItem.superclass.createDom.apply(this,arguments);this.el.append(new Alipw.Template(['<span class="{$baseCls}-text"></span>']).set({baseCls:this.baseCls}).compile())},renderComplete:function(){Alipw.ListItem.superclass.renderComplete.apply(this,arguments);this.setText(this.text);this.addEventListener("click",this.clickHandler,this,true)},_doLayout:function(){Alipw.ListItem.superclass._doLayout.apply(this,arguments)},setText:function(a){this.el.find("."+this.baseCls+"-text").text(this.text)},select:function(a){this.el.addClass(this.selectedCls);this.selected=true;this.fireEvent("select",{isUserOperation:a},false)},unselect:function(){this.el.removeClass(this.selectedCls);this.selected=false;this.fireEvent("unselect",{},false)},clickHandler:function(a){a.preventDefault();this.fireEvent("itemclick",{},false)}});Alipw.SlideView=Alipw.extend(Alipw.BoxComponent,{baseCls:"alipw-slideview",width:400,height:300,subviews:null,interval:5000,showIndex:true,currentIndex:0,autoPlay:false,transferEasing:"easeInOutExpo",transferDuration:500,constructor:function(){Alipw.SlideView.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.SlideView.superclass.commitProperties.apply(this,arguments);if(!this.subviews){this.subviews=new Array()}},initialize:function(){Alipw.SlideView.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.SlideView.superclass.createDom.apply(this,arguments);this.el.append(new Alipw.Template(['<div class="{$baseCls}-scrollwrap"></div>','<div class="{$baseCls}-index-bg"></div>','<div class="{$baseCls}-index"></div>']).set({baseCls:this.baseCls}).compile())},renderComplete:function(){Alipw.SlideView.superclass.renderComplete.apply(this,arguments);this.renderSubviews_SlideView();this.renderIndex_SlideView();if(this.autoPlay){this.play()}var a=this.el.find("."+this.baseCls+"-scrollwrap");a.bind("mouseover",jQuery.proxy(function(){clearInterval(this.autoPlayTimer)},this));a.bind("mouseout",jQuery.proxy(function(){if(this.isPlaying){this.play()}},this))},switchTo:function(b){clearInterval(this.autoPlayTimer);var d=this.el.find("."+this.baseCls+"-scrollwrap");var a=this.width*b*-1;this.indexBtnItems[this.currentIndex].removeClass(this.baseCls+"-index-selected");this.currentIndex=b;this.indexBtnItems[b].addClass(this.baseCls+"-index-selected");d.stop();d.animate({left:a},this.transferDuration,this.transferEasing);if(this.isPlaying){this.play()}},back:function(){var a;if(this.currentIndex==0){a=this.subviews.length-1}else{a=this.currentIndex-1}this.switchTo(a)},forward:function(){var a;if(this.currentIndex==this.subviews.length-1){a=0}else{a=this.currentIndex+1}this.switchTo(a)},_doLayout:function(){Alipw.SlideView.superclass._doLayout.apply(this,arguments)},renderSubviews_SlideView:function(){var a=this.el.find("."+this.baseCls+"-scrollwrap");Alipw.each(this.subviews,function(d,e){var e=$(e);var b=$('<div class="'+this.baseCls+'-subview"></div>');b.width(this.width);b.height(this.height);b.append(e);a.append(b)},this)},renderIndex_SlideView:function(){var b=this.el.find("."+this.baseCls+"-index");var a=this.el.find("."+this.baseCls+"-index-bg");if(!this.showIndex){b.hide();a.hide()}this.indexBtnItems=new Array();Alipw.each(this.subviews,function(e,f){var d=$('<a hidefocus="true" href="#">'+(e+1)+"</a>");if(e==this.currentIndex){d.addClass(this.baseCls+"-index-selected")}this.indexBtnItems.push(d);d.click(jQuery.proxy(function(g){g.preventDefault();this.switchTo(e)},this));if(this.showIndex){b.append(d)}},this)},play:function(){var a=this;clearInterval(this.autoPlayTimer);this.autoPlayTimer=setInterval(function(){a.forward()},this.interval);this.isPlaying=true},stop:function(){clearInterval(this.autoPlayTimer);this.isPlaying=false}});Alipw.Pagination=Alipw.extend(Alipw.Component,{baseCls:"alipw-pagination",total:0,pageSize:20,pageTotal:0,pageItemTemplate:'<a href="#">{$pageText}</a>',totalInfoTemplate:'<span class="alipw-pagination-info">共{$total}条记录</span>',currentPage:0,maxSiblingItemNum:10,prevText:"上一页",nextText:"下一页",showTotalInfo:false,constructor:function(a){Alipw.Pagination.superclass.constructor.apply(this,arguments)},commitProperties:function(){Alipw.Pagination.superclass.commitProperties.apply(this,arguments)},initialize:function(){Alipw.Pagination.superclass.initialize.apply(this,arguments)},createDom:function(){Alipw.Pagination.superclass.createDom.apply(this,arguments)},render:function(a){Alipw.Pagination.superclass.render.apply(this,arguments)},renderComplete:function(a){Alipw.Pagination.superclass.renderComplete.apply(this,arguments);this.createPageItems_Pagination();this.setCurrentPage(this.currentPage);this.addEventListener("click",this.pageItemClickHandler_Pagination,this,true);this.addEventListener("mouseover",this.pageItemMouseOverHandler_Pagination,this,true);this.addEventListener("mouseout",this.pageItemMouseOutHandler_Pagination,this,true)},setCurrentPage:function(b,a){var e=b!=this.currentPage;if(b<=this.pageTotal){var d=this.currentPage;this.currentPage=b;this.renderPageItems_Pagination();if(b>0){if(d>0&&this.pageItems[d-1]){this.pageItems[d-1].removeClass(this.baseCls+"-current")}this.pageItems[b-1].addClass(this.baseCls+"-current")}}if(e){this.fireEvent("pageChange",{},false);if(a){this.fireEvent("change",{},false)}}},_doLayout:function(){Alipw.BoxComponent.superclass._doLayout.apply(this,arguments)},createPageItems_Pagination:function(){var a=parseInt(this.total/this.pageSize)+(this.total%this.pageSize>0?1:0);this.pageTotal=a;if(a==0){this.currentPage=0}else{if(this.currentPage>a||this.currentPage==0){this.currentPage=1}}this.pageItems=new Array();this.leftEllipsis=jQuery('<span class="'+this.baseCls+'-ellipsis">…</span>');this.rightEllipsis=jQuery('<span class="'+this.baseCls+'-ellipsis">…</span>');this.prevBtn=new Alipw.Template(this.pageItemTemplate).set({pageText:this.prevText}).compile();this.nextBtn=new Alipw.Template(this.pageItemTemplate).set({pageText:this.nextText}).compile();this.totalInfo=new Alipw.Template(this.totalInfoTemplate).set({total:this.total}).compile()},renderPageItems_Pagination:function(){var b=this.getDisplayedItemsIndex_Pagination();for(var d in this.pageItems){if(Alipw.isIntegral(d)){this.pageItems[d].detach();this.pageItems[d].removeClass(this.baseCls+"-hover")}}var e,a;if(b){e=b[0];a=b[1]}else{e=0;a=this.pageTotal-1}for(var d=e;d<=a;d++){this.el.append(this.getPageItem_Pagination(d))}this.prevBtn.removeClass(this.baseCls+"-hover");this.nextBtn.removeClass(this.baseCls+"-hover");if(b&&b[0]!=0){if(b[0]>1){this.el.prepend(this.leftEllipsis)}else{this.leftEllipsis.detach()}this.el.prepend(this.getPageItem_Pagination(0))}else{this.leftEllipsis.detach()}if(b&&b[1]<this.pageTotal-1){if(b[1]<this.pageTotal-2){this.el.append(this.rightEllipsis)}else{this.rightEllipsis.detach()}this.el.append(this.getPageItem_Pagination(this.pageTotal-1))}else{this.rightEllipsis.detach()}if(this.currentPage!=1&&this.pageTotal>0){this.el.prepend(this.prevBtn)}else{this.prevBtn.detach()}if(this.currentPage!=this.pageTotal){this.el.append(this.nextBtn)}else{this.nextBtn.detach()}if(this.showTotalInfo){this.el.prepend(this.totalInfo)}},pageItemClickHandler_Pagination:function(b){b.preventDefault();var a=this.getPageItemIndexByTarget_Pagination(b.target);if(a>-1){this.setCurrentPage(a+1,true)}else{if(a==-100){if(this.currentPage>1){this.setCurrentPage(this.currentPage-1,true)}}else{if(a==-101){if(this.currentPage<this.pageTotal){this.setCurrentPage(this.currentPage+1,true)}}}}},pageItemMouseOverHandler_Pagination:function(b){var a=this.getPageItemIndexByTarget_Pagination(b.target);if(a>-1){this.pageItems[a].addClass(this.baseCls+"-hover")}else{if(a==-100){this.prevBtn.addClass(this.baseCls+"-hover")}else{if(a==-101){this.nextBtn.addClass(this.baseCls+"-hover")}}}},pageItemMouseOutHandler_Pagination:function(b){var a=this.getPageItemIndexByTarget_Pagination(b.target);if(a>-1){this.pageItems[a].removeClass(this.baseCls+"-hover")}else{if(a==-100){this.prevBtn.removeClass(this.baseCls+"-hover")}else{if(a==-101){this.nextBtn.removeClass(this.baseCls+"-hover")}}}},getPageItemIndexByTarget_Pagination:function(b){var a=-1;if(b==this.prevBtn[0]){a=-100}else{if(b==this.nextBtn[0]){a=-101}else{if(b.id.indexOf(this.id+"-index-")==0){a=parseInt(b.id.split(this.id+"-index-")[1])}}}if(b==this.el[0]){return -1}else{if(a==-1){return this.getPageItemIndexByTarget_Pagination(b.parentNode)}else{return a}}},getDisplayedItemsIndex_Pagination:function(){if(this.pageTotal<=this.maxSiblingItemNum||this.currentPage==0){return null}var b=this.currentPage-1;var f,d;if(this.maxSiblingItemNum%2==0){f=d=this.maxSiblingItemNum/2}else{f=parseInt(this.maxSiblingItemNum/2);d=this.maxSiblingItemNum-f}if(b-f<0){f=b;d=this.maxSiblingItemNum-f}else{if(b+d>this.pageTotal-1){d=this.pageTotal-1-b;f=this.maxSiblingItemNum-d}}var a=b-f;var e=b+d;return[a,e]},getPageItem_Pagination:function(a){if(this.pageItems&&!this.pageItems[a]){this.pageItems[a]=new Alipw.Template(this.pageItemTemplate).set({pageText:a+1}).compile();this.pageItems[a].attr("id",this.id+"-index-"+a)}return this.pageItems[a]}});Alipw.utils.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){var a="";var l,j,g,k,h,f,e;var b=0;d=Alipw.utils.Base64._utf8_encode(d);while(b<d.length){l=d.charCodeAt(b++);j=d.charCodeAt(b++);g=d.charCodeAt(b++);k=l>>2;h=((l&3)<<4)|(j>>4);f=((j&15)<<2)|(g>>6);e=g&63;if(isNaN(j)){f=e=64}else{if(isNaN(g)){e=64}}a=a+this._keyStr.charAt(k)+this._keyStr.charAt(h)+this._keyStr.charAt(f)+this._keyStr.charAt(e)}return a},decode:function(d){var a="";var l,j,g;var k,h,f,e;var b=0;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<d.length){k=this._keyStr.indexOf(d.charAt(b++));h=this._keyStr.indexOf(d.charAt(b++));f=this._keyStr.indexOf(d.charAt(b++));e=this._keyStr.indexOf(d.charAt(b++));l=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a=a+String.fromCharCode(l);if(f!=64){a=a+String.fromCharCode(j)}if(e!=64){a=a+String.fromCharCode(g)}}a=Alipw.utils.Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};Alipw.utils.Date=function(){var a={format:function(f,m){if(!(f instanceof Date)||isNaN(f)||f=="Invalid Date"){return"Invalid Date"}var k=f.getFullYear().toString();var i=(f.getMonth()+1).toString();var l=f.getDate().toString();var d=k.substr(2,2);var g=k;var n=i.length<2?"0"+i:i;var j=i;var h=l.length<2?"0"+l:l;var b=l;var e=m;e=e.replace(/YYYY/g,g);e=e.replace(/YY/g,d);e=e.replace(/MM/g,n);e=e.replace(/M/g,j);e=e.replace(/DD/g,h);e=e.replace(/D/g,b);return e},parse:function(g,q){var d=/YYYY|MM|DD|YY|M|D/g;var l=q;l=l.replace(/([\$\^\*\(\)\+\=\{\}\[\]\|\/\:\<\>\.\?\'\"])/g,"\\$1");var b=new Array();l=l.replace(d,function(i){b.push(i);if(i=="YYYY"){return"(\\d{4})"}else{if(i=="MM"){return"([0-1][0-9])"}else{if(i=="DD"){return"([0-3][0-9])"}else{if(i=="YY"){return"(\\d{2})"}else{if(i=="M"){return"([1]?[0-9])"}else{if(i=="D"){return"([1-3]?[0-9])"}}}}}}});l="^"+l+"$";var o=new RegExp(l);var f=g.match(o);var m,j,n;if(f){for(var e=1,h=f.length;e<h;e++){var p=f[e];var k=b[e-1];if(k=="YYYY"){m=p}else{if(k=="YY"){m=(new Date()).getFullYear().toString().substr(0,2)+p}else{if(k=="MM"){j=p}else{if(k=="M"){if(p.length==1){p="0"+p}j=p}else{if(k=="DD"){n=p}else{if(k=="D"){if(p.length==1){p="0"+p}n=p}}}}}}}}return new Date(m+"/"+j+"/"+n)}};return a}();Alipw.utils.Format=function(){var a={date:function(f,m){f=new Date(f);if(isNaN(f)||f=="Invalid Date"){return"Invalid Date"}var k=f.getFullYear().toString();var i=(f.getMonth()+1).toString();var l=f.getDate().toString();var d=k.substr(2,2);var g=k;var n=i.length<2?"0"+i:i;var j=i;var h=l.length<2?"0"+l:l;var b=l;var e=m;e=e.replace(/YYYY/g,g);e=e.replace(/YY/g,d);e=e.replace(/MM/g,n);e=e.replace(/M/g,j);e=e.replace(/DD/g,h);e=e.replace(/D/g,b);return e}};return a}();Alipw.utils.JSON=function(){var a={encode:function(b){return jQuery.parseJSON(b)},decode:function(d,f){if(!Alipw.isSet(f)){f=window.escape}var e=new Array();for(var b in d){e.push('"'+b+'":'+((typeof(d[b])=="object"&&Alipw.isSet(d[b]))?this.decode(d[b]):'"'+f(d[b])+'"'))}return"{"+e.join(",")+"}"}};return a}();Alipw.utils.QueryString=function(){var a={encode:function(j,g){if(!Alipw.isSet(g)){g=window.decodeURIComponent}var e=new Object();var d=j.split("&");var h;for(var f=0,b=d.length;f<b;f++){h=d[f].split("=");e[g(h[0])]=g(h[1])}return e},decode:function(f,e){if(!Alipw.isSet(e)){e=window.encodeURIComponent}var d=new Array();for(var b in f){d.push(e(b)+"="+e(f[b]))}return d.join("&")}};return a}();